<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ouroboros.Consensus.Storage.FS.Handle</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Consensus.Storage.FS.Handle.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="&quot;../doc-index.html&quot;">Index</a></li></ul><p class="caption">ouroboros-consensus-0.1.0.0: Consensus layer for the Ouroboros blockchain protocol</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Storage.FS.Handle</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This is meant to be used for the implementation of HasFS
 instances and not directly by client code.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:HandleOS">HandleOS</a> osHandle = <a href="#v:HandleOS">HandleOS</a> {<ul class="subs"><li><a href="#v:filePath">filePath</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:handle">handle</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Concurrent-MVar.html#t:MVar" title="Control.Concurrent.MVar">MVar</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> osHandle)</li></ul>}</li><li class="src short"><a href="#v:isOpenHandleOS">isOpenHandleOS</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> osHandle &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:closeHandleOS">closeHandleOS</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> osHandle &#8594; (osHandle &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:withOpenHandle">withOpenHandle</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> &#8594; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> osHandle &#8594; (osHandle &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a</li><li class="src short"><a href="#v:isHandleClosedException">isHandleClosedException</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Exception-Base.html#t:IOException" title="Control.Exception.Base">IOException</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HandleOS" class="def">HandleOS</a> osHandle <a href="src/Ouroboros.Consensus.Storage.FS.Handle.html#HandleOS" class="link">Source</a> <a href="#t:HandleOS" class="selflink">#</a></p><div class="doc"><p>File handlers for the IO instance for HasFS.
 This is parametric on the os.</p><p>The <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></code> is used to improve error messages.
 The <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Concurrent-MVar.html#t:MVar" title="Control.Concurrent.MVar">MVar</a></code> is used to implement <code>close</code>.
 osHandle is Fd for unix and HANDLE for Windows.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HandleOS" class="def">HandleOS</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:filePath" class="def">filePath</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:handle" class="def">handle</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Concurrent-MVar.html#t:MVar" title="Control.Concurrent.MVar">MVar</a> (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> osHandle)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:HandleOS" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandleOS:Eq:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a)</span> <a href="src/Ouroboros.Consensus.Storage.FS.Handle.html#line-29" class="link">Source</a> <a href="#t:HandleOS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandleOS:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-FS-Handle.html">Ouroboros.Consensus.Storage.FS.Handle</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a &#8594; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a &#8594; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HandleOS:Show:2"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a)</span> <a href="src/Ouroboros.Consensus.Storage.FS.Handle.html#line-32" class="link">Source</a> <a href="#t:HandleOS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HandleOS:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Storage-FS-Handle.html">Ouroboros.Consensus.Storage.FS.Handle</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> a] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:isOpenHandleOS" class="def">isOpenHandleOS</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> osHandle &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Ouroboros.Consensus.Storage.FS.Handle.html#isOpenHandleOS" class="link">Source</a> <a href="#v:isOpenHandleOS" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:closeHandleOS" class="def">closeHandleOS</a> &#8759; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> osHandle &#8594; (osHandle &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Ouroboros.Consensus.Storage.FS.Handle.html#closeHandleOS" class="link">Source</a> <a href="#v:closeHandleOS" class="selflink">#</a></p><div class="doc"><p>This is a no-op when the handle is already closed.</p></div></div><div class="top"><p class="src"><a id="v:withOpenHandle" class="def">withOpenHandle</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> &#8594; <a href="Ouroboros-Consensus-Storage-FS-Handle.html#t:HandleOS" title="Ouroboros.Consensus.Storage.FS.Handle">HandleOS</a> osHandle &#8594; (osHandle &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/Ouroboros.Consensus.Storage.FS.Handle.html#withOpenHandle" class="link">Source</a> <a href="#v:withOpenHandle" class="selflink">#</a></p><div class="doc"><p>This is meant to be used for the implementation of individual file system commands.
 Using it for larger scopes woud not be correct, since we would not notice if the
 handle is closed.</p></div></div><div class="top"><p class="src"><a id="v:isHandleClosedException" class="def">isHandleClosedException</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Exception-Base.html#t:IOException" title="Control.Exception.Base">IOException</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Ouroboros.Consensus.Storage.FS.Handle.html#isHandleClosedException" class="link">Source</a> <a href="#v:isHandleClosedException" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>