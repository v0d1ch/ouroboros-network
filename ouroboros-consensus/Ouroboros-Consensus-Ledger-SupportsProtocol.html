<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Consensus.Ledger.SupportsProtocol</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-consensus-0.1.0.0: Consensus layer for the Ouroboros blockchain protocol</span><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Consensus.Ledger.SupportsProtocol.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Ledger.SupportsProtocol</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">class</span> (<a href="Ouroboros-Consensus-Block-SupportsProtocol.html#t:BlockSupportsProtocol" title="Ouroboros.Consensus.Block.SupportsProtocol">BlockSupportsProtocol</a> blk, <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:UpdateLedger" title="Ouroboros.Consensus.Ledger.Abstract">UpdateLedger</a> blk, <a href="Ouroboros-Consensus-HeaderValidation.html#t:ValidateEnvelope" title="Ouroboros.Consensus.HeaderValidation">ValidateEnvelope</a> blk) &#8658; <a href="#t:LedgerSupportsProtocol">LedgerSupportsProtocol</a> blk <span class="keyword">where</span><ul class="subs"><li><a href="#v:protocolLedgerView">protocolLedgerView</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerConfig" title="Ouroboros.Consensus.Ledger.Basics">LedgerConfig</a> blk &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> blk) &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Protocol-Abstract.html#t:LedgerView" title="Ouroboros.Consensus.Protocol.Abstract">LedgerView</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:BlockProtocol" title="Ouroboros.Consensus.Block.Abstract">BlockProtocol</a> blk))</li><li><a href="#v:ledgerViewForecastAt">ledgerViewForecastAt</a> &#8759; <a href="Ouroboros-Consensus-Util-CallStack.html#t:HasCallStack" title="Ouroboros.Consensus.Util.CallStack">HasCallStack</a> &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerConfig" title="Ouroboros.Consensus.Ledger.Basics">LedgerConfig</a> blk &#8594; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> blk &#8594; <a href="Ouroboros-Consensus-Forecast.html#t:Forecast" title="Ouroboros.Consensus.Forecast">Forecast</a> (<a href="Ouroboros-Consensus-Protocol-Abstract.html#t:LedgerView" title="Ouroboros.Consensus.Protocol.Abstract">LedgerView</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:BlockProtocol" title="Ouroboros.Consensus.Block.Abstract">BlockProtocol</a> blk))</li></ul></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> (<a href="Ouroboros-Consensus-Block-SupportsProtocol.html#t:BlockSupportsProtocol" title="Ouroboros.Consensus.Block.SupportsProtocol">BlockSupportsProtocol</a> blk, <a href="Ouroboros-Consensus-Ledger-Abstract.html#t:UpdateLedger" title="Ouroboros.Consensus.Ledger.Abstract">UpdateLedger</a> blk, <a href="Ouroboros-Consensus-HeaderValidation.html#t:ValidateEnvelope" title="Ouroboros.Consensus.HeaderValidation">ValidateEnvelope</a> blk) &#8658; <a id="t:LedgerSupportsProtocol" class="def">LedgerSupportsProtocol</a> blk <span class="keyword">where</span> <a href="src/Ouroboros.Consensus.Ledger.SupportsProtocol.html#LedgerSupportsProtocol" class="link">Source</a> <a href="#t:LedgerSupportsProtocol" class="selflink">#</a></p><div class="doc"><p>Link protocol to ledger</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:protocolLedgerView" class="def">protocolLedgerView</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerConfig" title="Ouroboros.Consensus.Ledger.Basics">LedgerConfig</a> blk &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> blk) &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Protocol-Abstract.html#t:LedgerView" title="Ouroboros.Consensus.Protocol.Abstract">LedgerView</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:BlockProtocol" title="Ouroboros.Consensus.Block.Abstract">BlockProtocol</a> blk)) <a href="src/Ouroboros.Consensus.Ledger.SupportsProtocol.html#protocolLedgerView" class="link">Source</a> <a href="#v:protocolLedgerView" class="selflink">#</a></p><div class="doc"><p>Extract ticked ledger view from ticked ledger state</p><p>See <code><a href="Ouroboros-Consensus-Ledger-SupportsProtocol.html#v:ledgerViewForecastAt" title="Ouroboros.Consensus.Ledger.SupportsProtocol">ledgerViewForecastAt</a></code> for a discussion and precise definition of the
 relation between this and forecasting.</p></div><p class="src"><a id="v:ledgerViewForecastAt" class="def">ledgerViewForecastAt</a> &#8759; <a href="Ouroboros-Consensus-Util-CallStack.html#t:HasCallStack" title="Ouroboros.Consensus.Util.CallStack">HasCallStack</a> &#8658; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerConfig" title="Ouroboros.Consensus.Ledger.Basics">LedgerConfig</a> blk &#8594; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> blk &#8594; <a href="Ouroboros-Consensus-Forecast.html#t:Forecast" title="Ouroboros.Consensus.Forecast">Forecast</a> (<a href="Ouroboros-Consensus-Protocol-Abstract.html#t:LedgerView" title="Ouroboros.Consensus.Protocol.Abstract">LedgerView</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:BlockProtocol" title="Ouroboros.Consensus.Block.Abstract">BlockProtocol</a> blk)) <a href="src/Ouroboros.Consensus.Ledger.SupportsProtocol.html#ledgerViewForecastAt" class="link">Source</a> <a href="#v:ledgerViewForecastAt" class="selflink">#</a></p><div class="doc"><p>Get a forecast at the given ledger state.</p><p>This forecast can be used to validate headers of blocks within the range of
 the forecast. These blocks need to live on a chain that fits on the last
 applied block of the given ledger.</p><p>The range of the forecast should allow to validate a sufficient number of
 headers to validate an alternative chain longer than ours, so that chain
 selection can decide whether or not we prefer the alternative chain to our
 current chain. In addition, it would be helpful, though not essential, if
 we can look further ahead than that, as this would improve sync
 performance.</p><p>NOTE (difference between <code><a href="Ouroboros-Consensus-Ledger-SupportsProtocol.html#v:ledgerViewForecastAt" title="Ouroboros.Consensus.Ledger.SupportsProtocol">ledgerViewForecastAt</a></code> and <code><a href="Ouroboros-Consensus-Ledger-Basics.html#v:applyChainTick" title="Ouroboros.Consensus.Ledger.Basics">applyChainTick</a></code>):
 Both <code><a href="Ouroboros-Consensus-Ledger-SupportsProtocol.html#v:ledgerViewForecastAt" title="Ouroboros.Consensus.Ledger.SupportsProtocol">ledgerViewForecastAt</a></code> and <code><a href="Ouroboros-Consensus-Ledger-Basics.html#v:applyChainTick" title="Ouroboros.Consensus.Ledger.Basics">applyChainTick</a></code> can be used to obtain
 a protocol ledger view for a future slot. The difference between the two
 is that <code><a href="Ouroboros-Consensus-Ledger-Basics.html#v:applyChainTick" title="Ouroboros.Consensus.Ledger.Basics">applyChainTick</a></code> assumes no blocks are present between the current
 ledger tip and the specified <code><a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a></code>, whereas <code><a href="Ouroboros-Consensus-Ledger-SupportsProtocol.html#v:ledgerViewForecastAt" title="Ouroboros.Consensus.Ledger.SupportsProtocol">ledgerViewForecastAt</a></code>
 cannot make such an assumption. Thus, <code><a href="Ouroboros-Consensus-Ledger-Basics.html#v:applyChainTick" title="Ouroboros.Consensus.Ledger.Basics">applyChainTick</a></code> cannot fail, whereas
 the forecast returned by <code><a href="Ouroboros-Consensus-Ledger-SupportsProtocol.html#v:ledgerViewForecastAt" title="Ouroboros.Consensus.Ledger.SupportsProtocol">ledgerViewForecastAt</a></code> might report an
 <code><a href="Ouroboros-Consensus-Forecast.html#t:OutsideForecastRange" title="Ouroboros.Consensus.Forecast">OutsideForecastRange</a></code> for the same <code><a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a></code>. We expect the two functions
 to produce the same view whenever the <code><a href="Ouroboros-Consensus-Block-Abstract.html#t:SlotNo" title="Ouroboros.Consensus.Block.Abstract">SlotNo</a></code> <em>is</em> in range, however.
 More precisely:</p><p>If</p><pre>   forecastFor (ledgerViewForecastAt cfg st) for
== Just view</pre><p>then</p><pre>   protocolLedgerView cfg (applyChainTick cfg for st)
== view</pre><p>See <code>lemma_ledgerViewForecastAt_applyChainTick</code>.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:LedgerSupportsProtocol">Instances</h4><details id="i:LedgerSupportsProtocol" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:LedgerSupportsProtocol:LedgerSupportsProtocol:1"></span> <a href="Ouroboros-Consensus-HardFork-Combinator-Abstract-CanHardFork.html#t:CanHardFork" title="Ouroboros.Consensus.HardFork.Combinator.Abstract.CanHardFork">CanHardFork</a> xs &#8658; <a href="Ouroboros-Consensus-Ledger-SupportsProtocol.html#t:LedgerSupportsProtocol" title="Ouroboros.Consensus.Ledger.SupportsProtocol">LedgerSupportsProtocol</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkBlock" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkBlock</a> xs)</span> <a href="src/Ouroboros.Consensus.HardFork.Combinator.Ledger.html#line-316" class="link">Source</a> <a href="#t:LedgerSupportsProtocol" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:LedgerSupportsProtocol:LedgerSupportsProtocol:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-HardFork-Combinator-Ledger.html">Ouroboros.Consensus.HardFork.Combinator.Ledger</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:protocolLedgerView">protocolLedgerView</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerConfig" title="Ouroboros.Consensus.Ledger.Basics">LedgerConfig</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkBlock" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkBlock</a> xs) &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkBlock" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkBlock</a> xs)) &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Protocol-Abstract.html#t:LedgerView" title="Ouroboros.Consensus.Protocol.Abstract">LedgerView</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:BlockProtocol" title="Ouroboros.Consensus.Block.Abstract">BlockProtocol</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkBlock" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkBlock</a> xs))) <a href="src/Ouroboros.Consensus.Ledger.SupportsProtocol.html#protocolLedgerView" class="link">Source</a> <a href="#v:protocolLedgerView" class="selflink">#</a></p><p class="src"><a href="#v:ledgerViewForecastAt">ledgerViewForecastAt</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerConfig" title="Ouroboros.Consensus.Ledger.Basics">LedgerConfig</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkBlock" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkBlock</a> xs) &#8594; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkBlock" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkBlock</a> xs) &#8594; <a href="Ouroboros-Consensus-Forecast.html#t:Forecast" title="Ouroboros.Consensus.Forecast">Forecast</a> (<a href="Ouroboros-Consensus-Protocol-Abstract.html#t:LedgerView" title="Ouroboros.Consensus.Protocol.Abstract">LedgerView</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:BlockProtocol" title="Ouroboros.Consensus.Block.Abstract">BlockProtocol</a> (<a href="Ouroboros-Consensus-HardFork-Combinator-Basics.html#t:HardForkBlock" title="Ouroboros.Consensus.HardFork.Combinator.Basics">HardForkBlock</a> xs))) <a href="src/Ouroboros.Consensus.Ledger.SupportsProtocol.html#ledgerViewForecastAt" class="link">Source</a> <a href="#v:ledgerViewForecastAt" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:LedgerSupportsProtocol:LedgerSupportsProtocol:2"></span> <a href="Ouroboros-Consensus-Ledger-Dual.html#t:Bridge" title="Ouroboros.Consensus.Ledger.Dual">Bridge</a> m a &#8658; <a href="Ouroboros-Consensus-Ledger-SupportsProtocol.html#t:LedgerSupportsProtocol" title="Ouroboros.Consensus.Ledger.SupportsProtocol">LedgerSupportsProtocol</a> (<a href="Ouroboros-Consensus-Ledger-Dual.html#t:DualBlock" title="Ouroboros.Consensus.Ledger.Dual">DualBlock</a> m a)</span> <a href="src/Ouroboros.Consensus.Ledger.Dual.html#line-481" class="link">Source</a> <a href="#t:LedgerSupportsProtocol" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:LedgerSupportsProtocol:LedgerSupportsProtocol:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Ledger-Dual.html">Ouroboros.Consensus.Ledger.Dual</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:protocolLedgerView">protocolLedgerView</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerConfig" title="Ouroboros.Consensus.Ledger.Basics">LedgerConfig</a> (<a href="Ouroboros-Consensus-Ledger-Dual.html#t:DualBlock" title="Ouroboros.Consensus.Ledger.Dual">DualBlock</a> m a) &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> (<a href="Ouroboros-Consensus-Ledger-Dual.html#t:DualBlock" title="Ouroboros.Consensus.Ledger.Dual">DualBlock</a> m a)) &#8594; <a href="Ouroboros-Consensus-Ticked.html#t:Ticked" title="Ouroboros.Consensus.Ticked">Ticked</a> (<a href="Ouroboros-Consensus-Protocol-Abstract.html#t:LedgerView" title="Ouroboros.Consensus.Protocol.Abstract">LedgerView</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:BlockProtocol" title="Ouroboros.Consensus.Block.Abstract">BlockProtocol</a> (<a href="Ouroboros-Consensus-Ledger-Dual.html#t:DualBlock" title="Ouroboros.Consensus.Ledger.Dual">DualBlock</a> m a))) <a href="src/Ouroboros.Consensus.Ledger.SupportsProtocol.html#protocolLedgerView" class="link">Source</a> <a href="#v:protocolLedgerView" class="selflink">#</a></p><p class="src"><a href="#v:ledgerViewForecastAt">ledgerViewForecastAt</a> &#8759; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerConfig" title="Ouroboros.Consensus.Ledger.Basics">LedgerConfig</a> (<a href="Ouroboros-Consensus-Ledger-Dual.html#t:DualBlock" title="Ouroboros.Consensus.Ledger.Dual">DualBlock</a> m a) &#8594; <a href="Ouroboros-Consensus-Ledger-Basics.html#t:LedgerState" title="Ouroboros.Consensus.Ledger.Basics">LedgerState</a> (<a href="Ouroboros-Consensus-Ledger-Dual.html#t:DualBlock" title="Ouroboros.Consensus.Ledger.Dual">DualBlock</a> m a) &#8594; <a href="Ouroboros-Consensus-Forecast.html#t:Forecast" title="Ouroboros.Consensus.Forecast">Forecast</a> (<a href="Ouroboros-Consensus-Protocol-Abstract.html#t:LedgerView" title="Ouroboros.Consensus.Protocol.Abstract">LedgerView</a> (<a href="Ouroboros-Consensus-Block-Abstract.html#t:BlockProtocol" title="Ouroboros.Consensus.Block.Abstract">BlockProtocol</a> (<a href="Ouroboros-Consensus-Ledger-Dual.html#t:DualBlock" title="Ouroboros.Consensus.Ledger.Dual">DualBlock</a> m a))) <a href="src/Ouroboros.Consensus.Ledger.SupportsProtocol.html#ledgerViewForecastAt" class="link">Source</a> <a href="#v:ledgerViewForecastAt" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>