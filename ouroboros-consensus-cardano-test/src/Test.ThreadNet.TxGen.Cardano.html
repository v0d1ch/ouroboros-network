<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds           #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances   #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase          #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns      #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications    #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies        #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.ThreadNet.TxGen.Cardano</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#CardanoTxGenExtra"><span class="hs-identifier">CardanoTxGenExtra</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">assert</span></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">maybeToList</span></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Data.SOP.Strict</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">StrictSeq</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SlotNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Config</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Ledger</span></a></span><span>
</span><span id="line-24"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">tickedHardForkLedgerStatePerEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.State.Types</span></a></span><span>
</span><span id="line-26"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">currentState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">getHardForkState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Util.Telescope</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Tele</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Basics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">LedgerConfig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">LedgerState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">applyChainTick</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.NodeId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">CoreNodeId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Crypto</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toVerification</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Crypto.Signing</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Byron</span></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Chain.Common</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Byron</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Chain.Genesis</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">GeneratedSecrets</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Address</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SL</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BootstrapAddress</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Hashes</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SL</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.SafeHash</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SL</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Val</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;-&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Shelley.Spec.Ledger.API</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SL</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Shelley.Spec.Ledger.Address.Bootstrap</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SL</span></span><span>
</span><span id="line-44"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">makeBootstrapWitness</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Shelley.Spec.Ledger.Tx</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SL</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">WitnessSetHKD</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Shelley.Spec.Ledger.UTxO</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SL</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">makeWitnessVKey</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">GenTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier">ShelleyBlock</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier">mkShelleyTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Ledger.Ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ticked</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier">tickedShelleyLedgerState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier">Ouroboros.Consensus.Cardano</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier">Ouroboros.Consensus.Cardano.Block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier">CardanoEras</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">GenTx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>                     </span><span class="annot"><span class="hs-identifier">ShelleyEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier">Ouroboros.Consensus.Cardano.Node</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier">CardanoHardForkConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier">Test.ThreadNet.Infra.Shelley</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Shelley</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-test/src"><span class="hs-identifier">Test.ThreadNet.TxGen</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">data</span><span> </span><span id="CardanoTxGenExtra"><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#CardanoTxGenExtra"><span class="hs-identifier hs-var">CardanoTxGenExtra</span></a></span></span><span> </span><span id="local-6989586621679408224"><span class="annot"><a href="#local-6989586621679408224"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CardanoTxGenExtra"><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#CardanoTxGenExtra"><span class="hs-identifier hs-var">CardanoTxGenExtra</span></a></span></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="ctgeByronGenesisKeys"><span class="annot"><span class="annottext">CardanoTxGenExtra c -&gt; GeneratedSecrets
</span><a href="Test.ThreadNet.TxGen.Cardano.html#ctgeByronGenesisKeys"><span class="hs-identifier hs-var hs-var">ctgeByronGenesisKeys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">GeneratedSecrets</span></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ctgeNetworkMagic"><span class="annot"><span class="annottext">CardanoTxGenExtra c -&gt; NetworkMagic
</span><a href="Test.ThreadNet.TxGen.Cardano.html#ctgeNetworkMagic"><span class="hs-identifier hs-var hs-var">ctgeNetworkMagic</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Byron.NetworkMagic</span></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ctgeShelleyCoreNodes"><span class="annot"><span class="annottext">CardanoTxGenExtra c -&gt; [CoreNode c]
</span><a href="Test.ThreadNet.TxGen.Cardano.html#ctgeShelleyCoreNodes"><span class="hs-identifier hs-var hs-var">ctgeShelleyCoreNodes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-type">Shelley.CoreNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408224"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span id="local-6989586621679408000"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoHardForkConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408000"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-test/src"><span class="hs-identifier hs-type">TxGen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408000"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="TxGenExtra"><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-test/src"><span class="hs-identifier hs-var">TxGenExtra</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408000"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#CardanoTxGenExtra"><span class="hs-identifier hs-type">CardanoTxGenExtra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408000"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-comment">-- TODO also generate &quot; typical &quot; Byron and Shelley transactions</span><span>
</span><span id="line-72"></span><span>  </span><span id="local-6989586621679407997"><span class="annot"><span class="annottext">testGenTxs :: CoreNodeId
-&gt; NumCoreNodes
-&gt; SlotNo
-&gt; TopLevelConfig (CardanoBlock c)
-&gt; TxGenExtra (CardanoBlock c)
-&gt; LedgerState (CardanoBlock c)
-&gt; Gen [GenTx (CardanoBlock c)]
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-test/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">testGenTxs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CoreNodeId</span></a></span><span> </span><span id="local-6989586621679407994"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679407994"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679407993"><span class="annot"><span class="annottext">NumCoreNodes
</span><a href="#local-6989586621679407993"><span class="hs-identifier hs-var">_ncn</span></a></span></span><span> </span><span id="local-6989586621679407992"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679407992"><span class="hs-identifier hs-var">curSlot</span></a></span></span><span> </span><span id="local-6989586621679407991"><span class="annot"><span class="annottext">TopLevelConfig (CardanoBlock c)
</span><a href="#local-6989586621679407991"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679407990"><span class="annot"><span class="annottext">TxGenExtra (CardanoBlock c)
</span><a href="#local-6989586621679407990"><span class="hs-identifier hs-var">extra</span></a></span></span><span> </span><span id="local-6989586621679407989"><span class="annot"><span class="annottext">LedgerState (CardanoBlock c)
</span><a href="#local-6989586621679407989"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-73"></span><span>      </span><span class="annot"><span class="annottext">[GenTx (CardanoBlock c)] -&gt; Gen [GenTx (CardanoBlock c)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([GenTx (CardanoBlock c)] -&gt; Gen [GenTx (CardanoBlock c)])
-&gt; [GenTx (CardanoBlock c)] -&gt; Gen [GenTx (CardanoBlock c)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (GenTx (CardanoBlock c)) -&gt; [GenTx (CardanoBlock c)]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (GenTx (CardanoBlock c)) -&gt; [GenTx (CardanoBlock c)])
-&gt; Maybe (GenTx (CardanoBlock c)) -&gt; [GenTx (CardanoBlock c)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MigrationInfo c
-&gt; SlotNo
-&gt; LedgerConfig (CardanoBlock c)
-&gt; LedgerState (CardanoBlock c)
-&gt; Maybe (GenTx (CardanoBlock c))
forall c.
CardanoHardForkConstraints c =&gt;
MigrationInfo c
-&gt; SlotNo
-&gt; LedgerConfig (CardanoBlock c)
-&gt; LedgerState (CardanoBlock c)
-&gt; Maybe (GenTx (CardanoBlock c))
</span><a href="Test.ThreadNet.TxGen.Cardano.html#migrateUTxO"><span class="hs-identifier hs-var">migrateUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">MigrationInfo c
</span><a href="#local-6989586621679407987"><span class="hs-identifier hs-var">migrationInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679407992"><span class="hs-identifier hs-var">curSlot</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerConfig (CardanoBlock c)
</span><a href="#local-6989586621679407986"><span class="hs-identifier hs-var">lcfg</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState (CardanoBlock c)
</span><a href="#local-6989586621679407989"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-75"></span><span>      </span><span id="local-6989586621679407986"><span class="annot"><span class="annottext">lcfg :: LedgerConfig (CardanoBlock c)
</span><a href="#local-6989586621679407986"><span class="hs-identifier hs-var hs-var">lcfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig (CardanoBlock c) -&gt; LedgerConfig (CardanoBlock c)
forall blk. TopLevelConfig blk -&gt; LedgerConfig blk
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var hs-var">topLevelConfigLedger</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig (CardanoBlock c)
</span><a href="#local-6989586621679407991"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>      </span><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#CardanoTxGenExtra"><span class="hs-identifier hs-type">CardanoTxGenExtra</span></a></span><span>
</span><span id="line-78"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679407984"><span class="annot"><span class="annottext">GeneratedSecrets
ctgeByronGenesisKeys :: GeneratedSecrets
ctgeByronGenesisKeys :: forall c. CardanoTxGenExtra c -&gt; GeneratedSecrets
</span><a href="#local-6989586621679407984"><span class="hs-identifier hs-var hs-var">ctgeByronGenesisKeys</span></a></span></span><span>
</span><span id="line-79"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679407983"><span class="annot"><span class="annottext">NetworkMagic
ctgeNetworkMagic :: NetworkMagic
ctgeNetworkMagic :: forall c. CardanoTxGenExtra c -&gt; NetworkMagic
</span><a href="#local-6989586621679407983"><span class="hs-identifier hs-var hs-var">ctgeNetworkMagic</span></a></span></span><span>
</span><span id="line-80"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679407982"><span class="annot"><span class="annottext">[CoreNode c]
ctgeShelleyCoreNodes :: [CoreNode c]
ctgeShelleyCoreNodes :: forall c. CardanoTxGenExtra c -&gt; [CoreNode c]
</span><a href="#local-6989586621679407982"><span class="hs-identifier hs-var hs-var">ctgeShelleyCoreNodes</span></a></span></span><span>
</span><span id="line-81"></span><span>        </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxGenExtra (CardanoBlock c)
CardanoTxGenExtra c
</span><a href="#local-6989586621679407990"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">GeneratedSecrets</span></span><span>
</span><span id="line-84"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679407980"><span class="annot"><span class="annottext">[SigningKey]
gsRichSecrets :: GeneratedSecrets -&gt; [SigningKey]
gsRichSecrets :: [SigningKey]
</span><span class="hs-identifier hs-var hs-var">gsRichSecrets</span></span></span><span>
</span><span id="line-85"></span><span>        </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GeneratedSecrets
</span><a href="#local-6989586621679407984"><span class="hs-identifier hs-var">ctgeByronGenesisKeys</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>      </span><span id="local-6989586621679407987"><span class="annot"><span class="annottext">migrationInfo :: MigrationInfo c
</span><a href="#local-6989586621679407987"><span class="hs-identifier hs-var hs-var">migrationInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MigrationInfo :: forall c.
NetworkMagic
-&gt; SigningKey
-&gt; SignKeyDSIGN c
-&gt; SignKeyDSIGN c
-&gt; SignKeyDSIGN c
-&gt; SignKeyVRF c
-&gt; MigrationInfo c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#MigrationInfo"><span class="hs-identifier hs-type">MigrationInfo</span></a></span><span>
</span><span id="line-88"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">byronMagic :: NetworkMagic
</span><a href="Test.ThreadNet.TxGen.Cardano.html#byronMagic"><span class="hs-identifier hs-var">byronMagic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkMagic
</span><a href="#local-6989586621679407983"><span class="hs-identifier hs-var">ctgeNetworkMagic</span></a></span><span>
</span><span id="line-89"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SigningKey
byronSK :: SigningKey
byronSK :: SigningKey
</span><a href="Test.ThreadNet.TxGen.Cardano.html#byronSK"><span class="hs-identifier hs-var hs-var">byronSK</span></a></span><span>
</span><span id="line-90"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
paymentSK :: SignKeyDSIGN c
paymentSK :: SignKeyDSIGN c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#paymentSK"><span class="hs-identifier hs-var hs-var">paymentSK</span></a></span><span>
</span><span id="line-91"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
poolSK :: SignKeyDSIGN c
poolSK :: SignKeyDSIGN c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#poolSK"><span class="hs-identifier hs-var hs-var">poolSK</span></a></span><span>
</span><span id="line-92"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
stakingSK :: SignKeyDSIGN c
stakingSK :: SignKeyDSIGN c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#stakingSK"><span class="hs-identifier hs-var hs-var">stakingSK</span></a></span><span>
</span><span id="line-93"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SignKeyVRF c
vrfSK :: SignKeyVRF c
vrfSK :: SignKeyVRF c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#vrfSK"><span class="hs-identifier hs-var hs-var">vrfSK</span></a></span><span>
</span><span id="line-94"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span>      </span><span class="annot"><a href="#local-6989586621679407976"><span class="hs-identifier hs-type">byronSK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Byron.SigningKey</span></span><span>
</span><span id="line-97"></span><span>      </span><span id="local-6989586621679407976"><span class="annot"><span class="annottext">byronSK :: SigningKey
</span><a href="#local-6989586621679407976"><span class="hs-identifier hs-var hs-var">byronSK</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SigningKey]
</span><a href="#local-6989586621679407980"><span class="hs-identifier hs-var">gsRichSecrets</span></a></span><span> </span><span class="annot"><span class="annottext">[SigningKey] -&gt; Int -&gt; SigningKey
forall a. [a] -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">!!</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679407994"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span>      </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-type">Shelley.CoreNode</span></a></span><span>
</span><span id="line-100"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cnDelegateKey :: forall c. CoreNode c -&gt; SignKeyDSIGN c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.cnDelegateKey</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679407974"><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407974"><span class="hs-identifier hs-var">paymentSK</span></a></span></span><span>
</span><span id="line-101"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cnStakingKey :: forall c. CoreNode c -&gt; SignKeyDSIGN c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.cnStakingKey</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679407970"><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407970"><span class="hs-identifier hs-var">stakingSK</span></a></span></span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cnVRF :: forall c. CoreNode c -&gt; SignKeyVRF c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.cnVRF</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679407968"><span class="annot"><span class="annottext">SignKeyVRF c
</span><a href="#local-6989586621679407968"><span class="hs-identifier hs-var">vrfSK</span></a></span></span><span>
</span><span id="line-103"></span><span>        </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreNode c]
</span><a href="#local-6989586621679407982"><span class="hs-identifier hs-var">ctgeShelleyCoreNodes</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreNode c] -&gt; Int -&gt; CoreNode c
forall a. [a] -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">!!</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679407994"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span>      </span><span class="hs-comment">-- Reuse the payment key as the pool key, since it's an individual</span><span>
</span><span id="line-106"></span><span>      </span><span class="hs-comment">-- stake pool and the namespaces are separate.</span><span>
</span><span id="line-107"></span><span>      </span><span class="annot"><a href="#local-6989586621679407972"><span class="hs-identifier hs-type">poolSK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.SignKeyDSIGN</span></span><span> </span><span class="annot"><a href="#local-6989586621679408000"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-108"></span><span>      </span><span id="local-6989586621679407972"><span class="annot"><span class="annottext">poolSK :: SignKeyDSIGN c
</span><a href="#local-6989586621679407972"><span class="hs-identifier hs-var hs-var">poolSK</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407974"><span class="hs-identifier hs-var">paymentSK</span></a></span></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">-- | See 'migrateUTxO'</span><span>
</span><span id="line-111"></span><span class="hs-keyword">data</span><span> </span><span id="MigrationInfo"><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#MigrationInfo"><span class="hs-identifier hs-var">MigrationInfo</span></a></span></span><span> </span><span id="local-6989586621679408222"><span class="annot"><a href="#local-6989586621679408222"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MigrationInfo"><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#MigrationInfo"><span class="hs-identifier hs-var">MigrationInfo</span></a></span></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="byronMagic"><span class="annot"><span class="annottext">MigrationInfo c -&gt; NetworkMagic
</span><a href="Test.ThreadNet.TxGen.Cardano.html#byronMagic"><span class="hs-identifier hs-var hs-var">byronMagic</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Byron.NetworkMagic</span></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-comment">-- ^ Needed for creating a Byron address.</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="byronSK"><span class="annot"><span class="annottext">MigrationInfo c -&gt; SigningKey
</span><a href="Test.ThreadNet.TxGen.Cardano.html#byronSK"><span class="hs-identifier hs-var hs-var">byronSK</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Byron.SigningKey</span></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-comment">-- ^ The core node's Byron secret.</span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="paymentSK"><span class="annot"><span class="annottext">MigrationInfo c -&gt; SignKeyDSIGN c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#paymentSK"><span class="hs-identifier hs-var hs-var">paymentSK</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.SignKeyDSIGN</span></span><span> </span><span class="annot"><a href="#local-6989586621679408222"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="poolSK"><span class="annot"><span class="annottext">MigrationInfo c -&gt; SignKeyDSIGN c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#poolSK"><span class="hs-identifier hs-var hs-var">poolSK</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.SignKeyDSIGN</span></span><span> </span><span class="annot"><a href="#local-6989586621679408222"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="stakingSK"><span class="annot"><span class="annottext">MigrationInfo c -&gt; SignKeyDSIGN c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#stakingSK"><span class="hs-identifier hs-var hs-var">stakingSK</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.SignKeyDSIGN</span></span><span> </span><span class="annot"><a href="#local-6989586621679408222"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="vrfSK"><span class="annot"><span class="annottext">MigrationInfo c -&gt; SignKeyVRF c
</span><a href="Test.ThreadNet.TxGen.Cardano.html#vrfSK"><span class="hs-identifier hs-var hs-var">vrfSK</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.SignKeyVRF</span></span><span>   </span><span class="annot"><a href="#local-6989586621679408222"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-comment">-- ^ To be re-used by the individual pool.</span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">-- | Convert a core node's utxo from Byron to an active Shelley stake pool.</span><span>
</span><span id="line-124"></span><span class="hs-comment">--</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- Returns a transaction that registers a staking key, registers an individual</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- stake pool, delegates that stake key to that stake pool, and transfers all</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- utxo from the Byron 'byronAddr' to the Shelley address corresponding to the</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- pair of 'paymentSK' and 'stakingSK'.</span><span>
</span><span id="line-129"></span><span class="hs-comment">--</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- It returns 'Nothing' if the core node does not have any utxo in its</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- 'byronAddr' (eg if this transaction has already been applied).</span><span>
</span><span id="line-132"></span><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#migrateUTxO"><span class="hs-identifier hs-type">migrateUTxO</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-133"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679408226"><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoHardForkConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#MigrationInfo"><span class="hs-identifier hs-type">MigrationInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">LedgerConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">GenTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span id="migrateUTxO"><span class="annot"><span class="annottext">migrateUTxO :: MigrationInfo c
-&gt; SlotNo
-&gt; LedgerConfig (CardanoBlock c)
-&gt; LedgerState (CardanoBlock c)
-&gt; Maybe (GenTx (CardanoBlock c))
</span><a href="Test.ThreadNet.TxGen.Cardano.html#migrateUTxO"><span class="hs-identifier hs-var hs-var">migrateUTxO</span></a></span></span><span> </span><span id="local-6989586621679407961"><span class="annot"><span class="annottext">MigrationInfo c
</span><a href="#local-6989586621679407961"><span class="hs-identifier hs-var">migrationInfo</span></a></span></span><span> </span><span id="local-6989586621679407960"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679407960"><span class="hs-identifier hs-var">curSlot</span></a></span></span><span> </span><span id="local-6989586621679407959"><span class="annot"><span class="annottext">LedgerConfig (CardanoBlock c)
</span><a href="#local-6989586621679407959"><span class="hs-identifier hs-var">lcfg</span></a></span></span><span> </span><span id="local-6989586621679407958"><span class="annot"><span class="annottext">LedgerState (CardanoBlock c)
</span><a href="#local-6989586621679407958"><span class="hs-identifier hs-var">lst</span></a></span></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679407957"><span class="annot"><span class="annottext">UTxO (ShelleyEra c)
</span><a href="#local-6989586621679407957"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (UTxO (ShelleyEra c))
</span><a href="#local-6989586621679407956"><span class="hs-identifier hs-var">mbUTxO</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679407955"><span class="hs-identifier hs-type">picked</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SL.TxIn</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SL.TxOut</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>        </span><span id="local-6989586621679407955"><span class="annot"><span class="annottext">picked :: Map (TxIn c) (TxOut (ShelleyEra c))
</span><a href="#local-6989586621679407955"><span class="hs-identifier hs-var hs-var">picked</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-144"></span><span>            </span><span class="annot"><span class="annottext">(TxOut (ShelleyEra c) -&gt; Bool)
-&gt; Map (TxIn c) (TxOut (ShelleyEra c))
-&gt; Map (TxIn c) (TxOut (ShelleyEra c))
forall a k. (a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.filter</span></span><span> </span><span class="annot"><span class="annottext">TxOut (ShelleyEra c) -&gt; Bool
forall era. (Era era, Show (Value era)) =&gt; TxOut era -&gt; Bool
</span><a href="#local-6989586621679407953"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (TxIn c) (TxOut (ShelleyEra c))
 -&gt; Map (TxIn c) (TxOut (ShelleyEra c)))
-&gt; Map (TxIn c) (TxOut (ShelleyEra c))
-&gt; Map (TxIn c) (TxOut (ShelleyEra c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UTxO (ShelleyEra c)
-&gt; Map (TxIn (Crypto (ShelleyEra c))) (TxOut (ShelleyEra c))
forall era. UTxO era -&gt; Map (TxIn (Crypto era)) (TxOut era)
</span><span class="hs-identifier hs-var hs-var">SL.unUTxO</span></span><span> </span><span class="annot"><span class="annottext">UTxO (ShelleyEra c)
</span><a href="#local-6989586621679407957"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-145"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>            </span><span id="local-6989586621679407953"><span class="annot"><span class="annottext">pick :: TxOut era -&gt; Bool
</span><a href="#local-6989586621679407953"><span class="hs-identifier hs-var hs-var">pick</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SL.TxOut</span></span><span> </span><span id="local-6989586621679407950"><span class="annot"><span class="annottext">Addr (Crypto era)
</span><a href="#local-6989586621679407950"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="annot"><span class="annottext">Value era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-147"></span><span>                </span><span class="annot"><span class="annottext">Addr (Crypto era)
</span><a href="#local-6989586621679407950"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Addr (Crypto era) -&gt; Addr (Crypto era) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (Crypto era) -&gt; Addr (Crypto era)
forall crypto. BootstrapAddress crypto -&gt; Addr crypto
</span><span class="hs-identifier hs-var">SL.AddrBootstrap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Address -&gt; BootstrapAddress (Crypto era)
forall crypto. Address -&gt; BootstrapAddress crypto
</span><span class="hs-identifier hs-var">SL.BootstrapAddress</span></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621679407947"><span class="hs-identifier hs-var">byronAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-comment">-- Total held by 'byronAddr'</span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><a href="#local-6989586621679407946"><span class="hs-identifier hs-type">pickedCoin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.Coin</span></span><span>
</span><span id="line-151"></span><span>        </span><span id="local-6989586621679407946"><span class="annot"><span class="annottext">pickedCoin :: Coin
</span><a href="#local-6989586621679407946"><span class="hs-identifier hs-var hs-var">pickedCoin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut (ShelleyEra c) -&gt; Coin)
-&gt; Map (TxIn c) (TxOut (ShelleyEra c)) -&gt; Coin
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SL.TxOut</span></span><span> </span><span class="annot"><span class="annottext">Addr (Crypto (ShelleyEra c))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679407944"><span class="annot"><span class="annottext">Value (ShelleyEra c)
</span><a href="#local-6989586621679407944"><span class="hs-identifier hs-var">coin</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Coin
Value (ShelleyEra c)
</span><a href="#local-6989586621679407944"><span class="hs-identifier hs-var">coin</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (TxIn c) (TxOut (ShelleyEra c))
</span><a href="#local-6989586621679407955"><span class="hs-identifier hs-var">picked</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>        </span><span class="hs-comment">-- NOTE: The Cardano ThreadNet tests use the</span><span>
</span><span id="line-154"></span><span>        </span><span class="hs-comment">-- ouroboros-consensus-shelley-test infra's genesis config, which sets</span><span>
</span><span id="line-155"></span><span>        </span><span class="hs-comment">-- relevant protocol params to 0.</span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><a href="#local-6989586621679407943"><span class="hs-identifier hs-type">fee</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679407942"><span class="hs-identifier hs-type">deposits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679407941"><span class="hs-identifier hs-type">spentCoin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.Coin</span></span><span>
</span><span id="line-157"></span><span>        </span><span id="local-6989586621679407943"><span class="annot"><span class="annottext">fee :: Coin
</span><a href="#local-6989586621679407943"><span class="hs-identifier hs-var hs-var">fee</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><span class="hs-identifier hs-var">SL.Coin</span></span><span>  </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-158"></span><span>        </span><span id="local-6989586621679407942"><span class="annot"><span class="annottext">deposits :: Coin
</span><a href="#local-6989586621679407942"><span class="hs-identifier hs-var hs-var">deposits</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><span class="hs-identifier hs-var">SL.Coin</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-159"></span><span>        </span><span id="local-6989586621679407941"><span class="annot"><span class="annottext">spentCoin :: Coin
</span><a href="#local-6989586621679407941"><span class="hs-identifier hs-var hs-var">spentCoin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407942"><span class="hs-identifier hs-var">deposits</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407943"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><a href="#local-6989586621679407939"><span class="hs-identifier hs-type">unspentCoin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.Coin</span></span><span>
</span><span id="line-162"></span><span>        </span><span id="local-6989586621679407939"><span class="annot"><span class="annottext">unspentCoin :: Coin
</span><a href="#local-6989586621679407939"><span class="hs-identifier hs-var hs-var">unspentCoin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-163"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; Coin -&gt; Coin
forall a. (?callStack::CallStack) =&gt; Bool -&gt; a -&gt; a
</span><span class="hs-identifier hs-var hs-var">assert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407946"><span class="hs-identifier hs-var">pickedCoin</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407941"><span class="hs-identifier hs-var">spentCoin</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Coin) -&gt; Coin -&gt; Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-164"></span><span>            </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407946"><span class="hs-identifier hs-var">pickedCoin</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall t. Val t =&gt; t -&gt; t -&gt; t
</span><span class="hs-operator hs-var">&lt;-&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407941"><span class="hs-identifier hs-var">spentCoin</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span>        </span><span class="annot"><a href="#local-6989586621679407937"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.TxBody</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>        </span><span id="local-6989586621679407937"><span class="annot"><span class="annottext">body :: TxBody (ShelleyEra c)
</span><a href="#local-6989586621679407937"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody :: forall era.
(Era era, FromCBOR (PParamsDelta era), TransTxBody ToCBOR era) =&gt;
Set (TxIn (Crypto era))
-&gt; StrictSeq (TxOut era)
-&gt; StrictSeq (DCert (Crypto era))
-&gt; Wdrl (Crypto era)
-&gt; Coin
-&gt; SlotNo
-&gt; StrictMaybe (Update era)
-&gt; StrictMaybe (AuxiliaryDataHash (Crypto era))
-&gt; TxBody era
</span><span class="hs-identifier hs-type">SL.TxBody</span></span><span>
</span><span id="line-168"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_certs :: StrictSeq (DCert (Crypto (ShelleyEra c)))
</span><span class="hs-identifier hs-var">SL._certs</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[DCert c] -&gt; StrictSeq (DCert c)
forall a. [a] -&gt; StrictSeq a
</span><span class="hs-identifier hs-var">StrictSeq.fromList</span></span><span> </span><span class="annot"><span class="annottext">([DCert c] -&gt; StrictSeq (DCert c))
-&gt; [DCert c] -&gt; StrictSeq (DCert c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-169"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">DelegCert c -&gt; DCert c
forall crypto. DelegCert crypto -&gt; DCert crypto
</span><span class="hs-identifier hs-var">SL.DCertDeleg</span></span><span> </span><span class="annot"><span class="annottext">(DelegCert c -&gt; DCert c) -&gt; DelegCert c -&gt; DCert c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StakeCredential c -&gt; DelegCert c
forall crypto. StakeCredential crypto -&gt; DelegCert crypto
</span><span class="hs-identifier hs-var">SL.RegKey</span></span><span> </span><span class="annot"><span class="annottext">(StakeCredential c -&gt; DelegCert c)
-&gt; StakeCredential c -&gt; DelegCert c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; StakeCredential c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; Credential r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkCredential</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407930"><span class="hs-identifier hs-var">stakingSK</span></a></span><span>
</span><span id="line-170"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PoolCert c -&gt; DCert c
forall crypto. PoolCert crypto -&gt; DCert crypto
</span><span class="hs-identifier hs-var">SL.DCertPool</span></span><span>  </span><span class="annot"><span class="annottext">(PoolCert c -&gt; DCert c) -&gt; PoolCert c -&gt; DCert c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PoolParams c -&gt; PoolCert c
forall crypto. PoolParams crypto -&gt; PoolCert crypto
</span><span class="hs-identifier hs-var">SL.RegPool</span></span><span> </span><span class="annot"><span class="annottext">(PoolParams c -&gt; PoolCert c) -&gt; PoolParams c -&gt; PoolCert c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; PoolParams c
</span><a href="#local-6989586621679407927"><span class="hs-identifier hs-var">poolParams</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407939"><span class="hs-identifier hs-var">unspentCoin</span></a></span><span>
</span><span id="line-171"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DelegCert c -&gt; DCert c
forall crypto. DelegCert crypto -&gt; DCert crypto
</span><span class="hs-identifier hs-var">SL.DCertDeleg</span></span><span> </span><span class="annot"><span class="annottext">(DelegCert c -&gt; DCert c) -&gt; DelegCert c -&gt; DCert c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Delegation c -&gt; DelegCert c
forall crypto. Delegation crypto -&gt; DelegCert crypto
</span><span class="hs-identifier hs-var">SL.Delegate</span></span><span> </span><span class="annot"><span class="annottext">(Delegation c -&gt; DelegCert c) -&gt; Delegation c -&gt; DelegCert c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Delegation :: forall crypto.
StakeCredential crypto
-&gt; KeyHash 'StakePool crypto -&gt; Delegation crypto
</span><span class="hs-identifier hs-type">SL.Delegation</span></span><span>
</span><span id="line-172"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_delegator :: StakeCredential c
</span><span class="hs-identifier hs-var">SL._delegator</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; StakeCredential c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; Credential r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkCredential</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407930"><span class="hs-identifier hs-var">stakingSK</span></a></span><span>
</span><span id="line-173"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_delegatee :: KeyHash 'StakePool c
</span><span class="hs-identifier hs-var">SL._delegatee</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; KeyHash 'StakePool c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; KeyHash r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407921"><span class="hs-identifier hs-var">poolSK</span></a></span><span>
</span><span id="line-174"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-175"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-176"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_inputs :: Set (TxIn (Crypto (ShelleyEra c)))
</span><span class="hs-identifier hs-var">SL._inputs</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (TxIn c) (TxOut (ShelleyEra c)) -&gt; Set (TxIn c)
forall k a. Map k a -&gt; Set k
</span><span class="hs-identifier hs-var">Map.keysSet</span></span><span> </span><span class="annot"><span class="annottext">Map (TxIn c) (TxOut (ShelleyEra c))
</span><a href="#local-6989586621679407955"><span class="hs-identifier hs-var">picked</span></a></span><span>
</span><span id="line-177"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_mdHash :: StrictMaybe (AuxiliaryDataHash (Crypto (ShelleyEra c)))
</span><span class="hs-identifier hs-var">SL._mdHash</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (AuxiliaryDataHash (Crypto (ShelleyEra c)))
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SL.SNothing</span></span><span>
</span><span id="line-178"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_outputs :: StrictSeq (TxOut (ShelleyEra c))
</span><span class="hs-identifier hs-var">SL._outputs</span></span><span>  </span><span class="hs-glyph">=</span><span>
</span><span id="line-179"></span><span>              </span><span class="annot"><span class="annottext">TxOut (ShelleyEra c) -&gt; StrictSeq (TxOut (ShelleyEra c))
forall a. a -&gt; StrictSeq a
</span><span class="hs-identifier hs-var">StrictSeq.singleton</span></span><span> </span><span class="annot"><span class="annottext">(TxOut (ShelleyEra c) -&gt; StrictSeq (TxOut (ShelleyEra c)))
-&gt; TxOut (ShelleyEra c) -&gt; StrictSeq (TxOut (ShelleyEra c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Addr (Crypto (ShelleyEra c))
-&gt; Value (ShelleyEra c) -&gt; TxOut (ShelleyEra c)
forall era.
(Era era, Show (Value era), Compactible (Value era)) =&gt;
Addr (Crypto era) -&gt; Value era -&gt; TxOut era
</span><span class="hs-identifier hs-var">SL.TxOut</span></span><span> </span><span class="annot"><span class="annottext">Addr c
Addr (Crypto (ShelleyEra c))
</span><a href="#local-6989586621679407914"><span class="hs-identifier hs-var">shelleyAddr</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
Value (ShelleyEra c)
</span><a href="#local-6989586621679407939"><span class="hs-identifier hs-var">unspentCoin</span></a></span><span>
</span><span id="line-180"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_ttl :: SlotNo
</span><span class="hs-identifier hs-var">SL._ttl</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; SlotNo
</span><span class="hs-identifier hs-var">SlotNo</span></span><span> </span><span class="annot"><span class="annottext">Word64
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span>
</span><span id="line-181"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_txUpdate :: StrictMaybe (Update (ShelleyEra c))
</span><span class="hs-identifier hs-var">SL._txUpdate</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Update (ShelleyEra c))
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SL.SNothing</span></span><span>
</span><span id="line-182"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_txfee :: Coin
</span><span class="hs-identifier hs-var">SL._txfee</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407943"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-183"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_wdrls :: Wdrl (Crypto (ShelleyEra c))
</span><span class="hs-identifier hs-var">SL._wdrls</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (RewardAcnt c) Coin -&gt; Wdrl c
forall crypto. Map (RewardAcnt crypto) Coin -&gt; Wdrl crypto
</span><span class="hs-identifier hs-var">SL.Wdrl</span></span><span> </span><span class="annot"><span class="annottext">Map (RewardAcnt c) Coin
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-184"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span>        </span><span class="annot"><a href="#local-6989586621679407905"><span class="hs-identifier hs-type">bodyHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.SafeHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.EraIndependentTxBody</span></span><span>
</span><span id="line-187"></span><span>        </span><span id="local-6989586621679407905"><span class="annot"><span class="annottext">bodyHash :: SafeHash c EraIndependentTxBody
</span><a href="#local-6989586621679407905"><span class="hs-identifier hs-var hs-var">bodyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody (ShelleyEra c) -&gt; SafeHash c EraIndependentTxBody
forall c i x.
(HasAlgorithm c, HashAnnotated x i c) =&gt;
x -&gt; SafeHash c i
</span><span class="hs-identifier hs-var">SL.hashAnnotated</span></span><span> </span><span class="annot"><span class="annottext">TxBody (ShelleyEra c)
</span><a href="#local-6989586621679407937"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span>        </span><span class="hs-comment">-- Witness the use of bootstrap address's utxo.</span><span>
</span><span id="line-190"></span><span>        </span><span class="annot"><a href="#local-6989586621679407903"><span class="hs-identifier hs-type">byronWit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.BootstrapWitness</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-191"></span><span>        </span><span id="local-6989586621679407903"><span class="annot"><span class="annottext">byronWit :: BootstrapWitness c
</span><a href="#local-6989586621679407903"><span class="hs-identifier hs-var hs-var">byronWit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-192"></span><span>            </span><span class="annot"><span class="annottext">Hash c EraIndependentTxBody
-&gt; SigningKey -&gt; Attributes AddrAttributes -&gt; BootstrapWitness c
forall crypto.
(DSIGN crypto ~ Ed25519DSIGN, Crypto crypto) =&gt;
Hash crypto EraIndependentTxBody
-&gt; SigningKey
-&gt; Attributes AddrAttributes
-&gt; BootstrapWitness crypto
</span><span class="hs-identifier hs-var">SL.makeBootstrapWitness</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody -&gt; Hash c EraIndependentTxBody
forall crypto i. SafeHash crypto i -&gt; Hash (HASH crypto) i
</span><span class="hs-identifier hs-var">SL.extractHash</span></span><span> </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
</span><a href="#local-6989586621679407905"><span class="hs-identifier hs-var">bodyHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SigningKey
</span><a href="#local-6989586621679407901"><span class="hs-identifier hs-var">byronSK</span></a></span><span> </span><span class="annot"><span class="annottext">(Attributes AddrAttributes -&gt; BootstrapWitness c)
-&gt; Attributes AddrAttributes -&gt; BootstrapWitness c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-193"></span><span>            </span><span class="annot"><span class="annottext">Address -&gt; Attributes AddrAttributes
</span><span class="hs-identifier hs-var hs-var">Byron.addrAttributes</span></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621679407947"><span class="hs-identifier hs-var">byronAddr</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span>        </span><span class="hs-comment">-- Witness the stake delegation.</span><span>
</span><span id="line-196"></span><span>        </span><span class="annot"><a href="#local-6989586621679407899"><span class="hs-identifier hs-type">delegWit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.WitVKey</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">SL.Witness</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-197"></span><span>        </span><span id="local-6989586621679407899"><span class="annot"><span class="annottext">delegWit :: WitVKey 'Witness c
</span><a href="#local-6989586621679407899"><span class="hs-identifier hs-var hs-var">delegWit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>            </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
-&gt; KeyPair Any c -&gt; WitVKey 'Witness c
forall c (kr :: KeyRole).
(Crypto c, DSignable c (Hash (HASH c) EraIndependentTxBody)) =&gt;
SafeHash c EraIndependentTxBody
-&gt; KeyPair kr c -&gt; WitVKey 'Witness c
</span><span class="hs-identifier hs-var">SL.makeWitnessVKey</span></span><span>
</span><span id="line-199"></span><span>              </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
</span><a href="#local-6989586621679407905"><span class="hs-identifier hs-var">bodyHash</span></a></span><span>
</span><span id="line-200"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; KeyPair Any c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; KeyPair r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407930"><span class="hs-identifier hs-var">stakingSK</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-comment">-- Witness the pool registration.</span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><a href="#local-6989586621679407897"><span class="hs-identifier hs-type">poolWit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.WitVKey</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">SL.Witness</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-204"></span><span>        </span><span id="local-6989586621679407897"><span class="annot"><span class="annottext">poolWit :: WitVKey 'Witness c
</span><a href="#local-6989586621679407897"><span class="hs-identifier hs-var hs-var">poolWit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>            </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
-&gt; KeyPair Any c -&gt; WitVKey 'Witness c
forall c (kr :: KeyRole).
(Crypto c, DSignable c (Hash (HASH c) EraIndependentTxBody)) =&gt;
SafeHash c EraIndependentTxBody
-&gt; KeyPair kr c -&gt; WitVKey 'Witness c
</span><span class="hs-identifier hs-var">SL.makeWitnessVKey</span></span><span>
</span><span id="line-206"></span><span>              </span><span class="annot"><span class="annottext">SafeHash c EraIndependentTxBody
</span><a href="#local-6989586621679407905"><span class="hs-identifier hs-var">bodyHash</span></a></span><span>
</span><span id="line-207"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; KeyPair Any c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; KeyPair r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407921"><span class="hs-identifier hs-var">poolSK</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-keyword">in</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Map (TxIn c) (TxOut (ShelleyEra c)) -&gt; Bool
forall k a. Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.null</span></span><span> </span><span class="annot"><span class="annottext">Map (TxIn c) (TxOut (ShelleyEra c))
</span><a href="#local-6989586621679407955"><span class="hs-identifier hs-var">picked</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (GenTx (CardanoBlock c))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-keyword">else</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenTx (CardanoBlock c) -&gt; Maybe (GenTx (CardanoBlock c))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(GenTx (CardanoBlock c) -&gt; Maybe (GenTx (CardanoBlock c)))
-&gt; (Tx (ShelleyEra c) -&gt; GenTx (CardanoBlock c))
-&gt; Tx (ShelleyEra c)
-&gt; Maybe (GenTx (CardanoBlock c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenTx (ShelleyBlock (ShelleyEra c)) -&gt; GenTx (CardanoBlock c)
forall c. GenTx (ShelleyBlock (ShelleyEra c)) -&gt; CardanoGenTx c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-var">GenTxShelley</span></a></span><span class="annot"><span class="annottext">(GenTx (ShelleyBlock (ShelleyEra c)) -&gt; GenTx (CardanoBlock c))
-&gt; (Tx (ShelleyEra c) -&gt; GenTx (ShelleyBlock (ShelleyEra c)))
-&gt; Tx (ShelleyEra c)
-&gt; GenTx (CardanoBlock c)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Tx (ShelleyEra c) -&gt; GenTx (ShelleyBlock (ShelleyEra c))
forall era.
ShelleyBasedEra era =&gt;
Tx era -&gt; GenTx (ShelleyBlock era)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier hs-var">mkShelleyTx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tx (ShelleyEra c) -&gt; Maybe (GenTx (CardanoBlock c)))
-&gt; Tx (ShelleyEra c) -&gt; Maybe (GenTx (CardanoBlock c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="annottext">Tx :: forall era.
(Era era, ToCBOR (AuxiliaryData era), ToCBOR (TxBody era),
 ToCBOR (Witnesses era)) =&gt;
TxBody era
-&gt; Witnesses era -&gt; StrictMaybe (AuxiliaryData era) -&gt; Tx era
</span><span class="hs-identifier hs-type">SL.Tx</span></span><span>
</span><span id="line-213"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">body :: TxBody (ShelleyEra c)
</span><span class="hs-identifier hs-var">SL.body</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody (ShelleyEra c)
TxBody (ShelleyEra c)
</span><a href="#local-6989586621679407937"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-214"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">auxiliaryData :: StrictMaybe (AuxiliaryData (ShelleyEra c))
</span><span class="hs-identifier hs-var">SL.auxiliaryData</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (AuxiliaryData (ShelleyEra c))
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SL.SNothing</span></span><span>
</span><span id="line-215"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wits :: Witnesses (ShelleyEra c)
</span><span class="hs-identifier hs-var">SL.wits</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness (Crypto (ShelleyEra c)))
-&gt; Map (ScriptHash (Crypto (ShelleyEra c))) (Script (ShelleyEra c))
-&gt; Set (BootstrapWitness (Crypto (ShelleyEra c)))
-&gt; WitnessSet (ShelleyEra c)
forall era.
(Era era, AnnotatedData (Script era)) =&gt;
Set (WitVKey 'Witness (Crypto era))
-&gt; Map (ScriptHash (Crypto era)) (Script era)
-&gt; Set (BootstrapWitness (Crypto era))
-&gt; WitnessSet era
</span><span class="hs-identifier hs-var">SL.WitnessSet</span></span><span>
</span><span id="line-216"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[WitVKey 'Witness c] -&gt; Set (WitVKey 'Witness c)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679407899"><span class="hs-identifier hs-var">delegWit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WitVKey 'Witness c
</span><a href="#local-6989586621679407897"><span class="hs-identifier hs-var">poolWit</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>                             </span><span class="annot"><span class="annottext">Map (ScriptHash (Crypto (ShelleyEra c))) (Script (ShelleyEra c))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-218"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BootstrapWitness c -&gt; Set (BootstrapWitness c)
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">BootstrapWitness c
</span><a href="#local-6989586621679407903"><span class="hs-identifier hs-var">byronWit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenTx (CardanoBlock c))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-224"></span><span>    </span><span class="annot"><a href="#local-6989586621679407956"><span class="hs-identifier hs-type">mbUTxO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SL.UTxO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>    </span><span id="local-6989586621679407956"><span class="annot"><span class="annottext">mbUTxO :: Maybe (UTxO (ShelleyEra c))
</span><a href="#local-6989586621679407956"><span class="hs-identifier hs-var hs-var">mbUTxO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>        </span><span class="annot"><span class="annottext">(Ticked (LedgerState (ShelleyBlock (ShelleyEra c)))
 -&gt; UTxO (ShelleyEra c))
-&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
-&gt; Maybe (UTxO (ShelleyEra c))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Ticked (LedgerState (ShelleyBlock (ShelleyEra c)))
-&gt; UTxO (ShelleyEra c)
forall era. Ticked (LedgerState (ShelleyBlock era)) -&gt; UTxO era
</span><a href="Test.ThreadNet.TxGen.Cardano.html#getUTxOShelley"><span class="hs-identifier hs-var">getUTxOShelley</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
 -&gt; Maybe (UTxO (ShelleyEra c)))
-&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
-&gt; Maybe (UTxO (ShelleyEra c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-227"></span><span>        </span><span class="annot"><span class="annottext">Ticked (LedgerState (CardanoBlock c))
-&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
forall c.
Ticked (LedgerState (CardanoBlock c))
-&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
</span><a href="Test.ThreadNet.TxGen.Cardano.html#ejectShelleyTickedLedgerState"><span class="hs-identifier hs-var">ejectShelleyTickedLedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">(Ticked (LedgerState (CardanoBlock c))
 -&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c)))))
-&gt; Ticked (LedgerState (CardanoBlock c))
-&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-228"></span><span>        </span><span class="annot"><span class="annottext">LedgerConfig (CardanoBlock c)
-&gt; SlotNo
-&gt; LedgerState (CardanoBlock c)
-&gt; Ticked (LedgerState (CardanoBlock c))
forall l. IsLedger l =&gt; LedgerCfg l -&gt; SlotNo -&gt; l -&gt; Ticked l
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">applyChainTick</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerConfig (CardanoBlock c)
</span><a href="#local-6989586621679407959"><span class="hs-identifier hs-var">lcfg</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679407960"><span class="hs-identifier hs-var">curSlot</span></a></span><span> </span><span class="annot"><span class="annottext">(LedgerState (CardanoBlock c)
 -&gt; Ticked (LedgerState (CardanoBlock c)))
-&gt; LedgerState (CardanoBlock c)
-&gt; Ticked (LedgerState (CardanoBlock c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-229"></span><span>        </span><span class="annot"><span class="annottext">LedgerState (CardanoBlock c)
</span><a href="#local-6989586621679407958"><span class="hs-identifier hs-var">lst</span></a></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#MigrationInfo"><span class="hs-identifier hs-type">MigrationInfo</span></a></span><span>
</span><span id="line-232"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679407884"><span class="annot"><span class="annottext">NetworkMagic
byronMagic :: NetworkMagic
byronMagic :: forall c. MigrationInfo c -&gt; NetworkMagic
</span><a href="#local-6989586621679407884"><span class="hs-identifier hs-var hs-var">byronMagic</span></a></span></span><span>
</span><span id="line-233"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679407901"><span class="annot"><span class="annottext">SigningKey
byronSK :: SigningKey
byronSK :: forall c. MigrationInfo c -&gt; SigningKey
</span><a href="#local-6989586621679407901"><span class="hs-identifier hs-var hs-var">byronSK</span></a></span></span><span>
</span><span id="line-234"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679407883"><span class="annot"><span class="annottext">SignKeyDSIGN c
paymentSK :: SignKeyDSIGN c
paymentSK :: forall c. MigrationInfo c -&gt; SignKeyDSIGN c
</span><a href="#local-6989586621679407883"><span class="hs-identifier hs-var hs-var">paymentSK</span></a></span></span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679407921"><span class="annot"><span class="annottext">SignKeyDSIGN c
poolSK :: SignKeyDSIGN c
poolSK :: forall c. MigrationInfo c -&gt; SignKeyDSIGN c
</span><a href="#local-6989586621679407921"><span class="hs-identifier hs-var hs-var">poolSK</span></a></span></span><span>
</span><span id="line-236"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679407930"><span class="annot"><span class="annottext">SignKeyDSIGN c
stakingSK :: SignKeyDSIGN c
stakingSK :: forall c. MigrationInfo c -&gt; SignKeyDSIGN c
</span><a href="#local-6989586621679407930"><span class="hs-identifier hs-var hs-var">stakingSK</span></a></span></span><span>
</span><span id="line-237"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679407882"><span class="annot"><span class="annottext">SignKeyVRF c
vrfSK :: SignKeyVRF c
vrfSK :: forall c. MigrationInfo c -&gt; SignKeyVRF c
</span><a href="#local-6989586621679407882"><span class="hs-identifier hs-var hs-var">vrfSK</span></a></span></span><span>
</span><span id="line-238"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MigrationInfo c
</span><a href="#local-6989586621679407961"><span class="hs-identifier hs-var">migrationInfo</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><a href="#local-6989586621679407947"><span class="hs-identifier hs-type">byronAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Byron.Address</span></span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621679407947"><span class="annot"><span class="annottext">byronAddr :: Address
</span><a href="#local-6989586621679407947"><span class="hs-identifier hs-var hs-var">byronAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-242"></span><span>        </span><span class="annot"><span class="annottext">NetworkMagic -&gt; VerificationKey -&gt; Address
</span><span class="hs-identifier hs-var">Byron.makeVerKeyAddress</span></span><span> </span><span class="annot"><span class="annottext">NetworkMagic
</span><a href="#local-6989586621679407884"><span class="hs-identifier hs-var">byronMagic</span></a></span><span> </span><span class="annot"><span class="annottext">(VerificationKey -&gt; Address) -&gt; VerificationKey -&gt; Address
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SigningKey -&gt; VerificationKey
</span><span class="hs-identifier hs-var">toVerification</span></span><span> </span><span class="annot"><span class="annottext">SigningKey
</span><a href="#local-6989586621679407901"><span class="hs-identifier hs-var">byronSK</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-comment">-- We use a base reference for the stake so that we can refer to it in the</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-comment">-- same tx that registers it.</span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><a href="#local-6989586621679407914"><span class="hs-identifier hs-type">shelleyAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.Addr</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621679407914"><span class="annot"><span class="annottext">shelleyAddr :: Addr c
</span><a href="#local-6989586621679407914"><span class="hs-identifier hs-var hs-var">shelleyAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-248"></span><span>        </span><span class="annot"><span class="annottext">Network -&gt; PaymentCredential c -&gt; StakeReference c -&gt; Addr c
forall crypto.
Network
-&gt; PaymentCredential crypto -&gt; StakeReference crypto -&gt; Addr crypto
</span><span class="hs-identifier hs-var">SL.Addr</span></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.networkId</span></a></span><span>
</span><span id="line-249"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; PaymentCredential c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; Credential r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkCredential</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407883"><span class="hs-identifier hs-var">paymentSK</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeCredential c -&gt; StakeReference c
forall crypto. StakeCredential crypto -&gt; StakeReference crypto
</span><span class="hs-identifier hs-var">SL.StakeRefBase</span></span><span> </span><span class="annot"><span class="annottext">(StakeCredential c -&gt; StakeReference c)
-&gt; StakeCredential c -&gt; StakeReference c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; StakeCredential c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; Credential r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkCredential</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407930"><span class="hs-identifier hs-var">stakingSK</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-comment">-- A simplistic individual pool</span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><a href="#local-6989586621679407927"><span class="hs-identifier hs-type">poolParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.Coin</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.PoolParams</span></span><span> </span><span class="annot"><a href="#local-6989586621679408226"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span id="local-6989586621679407927"><span class="annot"><span class="annottext">poolParams :: Coin -&gt; PoolParams c
</span><a href="#local-6989586621679407927"><span class="hs-identifier hs-var hs-var">poolParams</span></a></span></span><span> </span><span id="local-6989586621679407877"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407877"><span class="hs-identifier hs-var">pledge</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PoolParams :: forall crypto.
KeyHash 'StakePool crypto
-&gt; Hash crypto (VerKeyVRF crypto)
-&gt; Coin
-&gt; Coin
-&gt; UnitInterval
-&gt; RewardAcnt crypto
-&gt; Set (KeyHash 'Staking crypto)
-&gt; StrictSeq StakePoolRelay
-&gt; StrictMaybe PoolMetadata
-&gt; PoolParams crypto
</span><span class="hs-identifier hs-type">SL.PoolParams</span></span><span>
</span><span id="line-255"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_poolCost :: Coin
</span><span class="hs-identifier hs-var">SL._poolCost</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><span class="hs-identifier hs-var">SL.Coin</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-256"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_poolMD :: StrictMaybe PoolMetadata
</span><span class="hs-identifier hs-var">SL._poolMD</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe PoolMetadata
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SL.SNothing</span></span><span>
</span><span id="line-257"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_poolMargin :: UnitInterval
</span><span class="hs-identifier hs-var">SL._poolMargin</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitInterval
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span>
</span><span id="line-258"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_poolOwners :: Set (KeyHash 'Staking c)
</span><span class="hs-identifier hs-var">SL._poolOwners</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking c -&gt; Set (KeyHash 'Staking c)
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Staking c -&gt; Set (KeyHash 'Staking c))
-&gt; KeyHash 'Staking c -&gt; Set (KeyHash 'Staking c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; KeyHash 'Staking c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; KeyHash r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407921"><span class="hs-identifier hs-var">poolSK</span></a></span><span>
</span><span id="line-259"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_poolPledge :: Coin
</span><span class="hs-identifier hs-var">SL._poolPledge</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679407877"><span class="hs-identifier hs-var">pledge</span></a></span><span>
</span><span id="line-260"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_poolId :: KeyHash 'StakePool c
</span><span class="hs-identifier hs-var">SL._poolId</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; KeyHash 'StakePool c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; KeyHash r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407921"><span class="hs-identifier hs-var">poolSK</span></a></span><span>
</span><span id="line-261"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_poolRAcnt :: RewardAcnt c
</span><span class="hs-identifier hs-var">SL._poolRAcnt</span></span><span>  </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>            </span><span class="annot"><span class="annottext">Network -&gt; StakeCredential c -&gt; RewardAcnt c
forall crypto.
Network -&gt; Credential 'Staking crypto -&gt; RewardAcnt crypto
</span><span class="hs-identifier hs-var">SL.RewardAcnt</span></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.networkId</span></a></span><span> </span><span class="annot"><span class="annottext">(StakeCredential c -&gt; RewardAcnt c)
-&gt; StakeCredential c -&gt; RewardAcnt c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c -&gt; StakeCredential c
forall c (r :: KeyRole).
PraosCrypto c =&gt;
SignKeyDSIGN c -&gt; Credential r c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkCredential</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN c
</span><a href="#local-6989586621679407921"><span class="hs-identifier hs-var">poolSK</span></a></span><span>
</span><span id="line-263"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_poolRelays :: StrictSeq StakePoolRelay
</span><span class="hs-identifier hs-var">SL._poolRelays</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq StakePoolRelay
forall a. StrictSeq a
</span><span class="hs-identifier hs-var">StrictSeq.empty</span></span><span>
</span><span id="line-264"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_poolVrf :: Hash c (VerKeyVRF c)
</span><span class="hs-identifier hs-var">SL._poolVrf</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SignKeyVRF c -&gt; Hash Blake2b_256 (VerKeyVRF c)
forall h vrf.
(HashAlgorithm h, VRFAlgorithm vrf) =&gt;
SignKeyVRF vrf -&gt; Hash h (VerKeyVRF vrf)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-test-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley-test/src"><span class="hs-identifier hs-var">Shelley.mkKeyHashVrf</span></a></span><span> </span><span class="annot"><span class="annottext">SignKeyVRF c
</span><a href="#local-6989586621679407882"><span class="hs-identifier hs-var">vrfSK</span></a></span><span>
</span><span id="line-265"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-comment">-----</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span id="local-6989586621679408029"><span id="local-6989586621679408030"><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#ejectShelleyNS"><span class="hs-identifier hs-type">ejectShelleyNS</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-270"></span><span>     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">NS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408030"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoEras</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408029"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679408030"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier hs-type">ShelleyBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679408029"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-272"></span><span id="ejectShelleyNS"><span class="annot"><span class="annottext">ejectShelleyNS :: NS f (CardanoEras c) -&gt; Maybe (f (ShelleyBlock (ShelleyEra c)))
</span><a href="Test.ThreadNet.TxGen.Cardano.html#ejectShelleyNS"><span class="hs-identifier hs-var hs-var">ejectShelleyNS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-273"></span><span>    </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">Z</span></a></span><span> </span><span id="local-6989586621679407859"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679407859"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f x -&gt; Maybe (f x)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621679407859"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><span class="annottext">NS f (CardanoEras c)
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (f (ShelleyBlock (ShelleyEra c)))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span id="local-6989586621679408081"><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#getUTxOShelley"><span class="hs-identifier hs-type">getUTxOShelley</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">Ticked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier hs-type">ShelleyBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408081"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SL.UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621679408081"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-278"></span><span id="getUTxOShelley"><span class="annot"><span class="annottext">getUTxOShelley :: Ticked (LedgerState (ShelleyBlock era)) -&gt; UTxO era
</span><a href="Test.ThreadNet.TxGen.Cardano.html#getUTxOShelley"><span class="hs-identifier hs-var hs-var">getUTxOShelley</span></a></span></span><span> </span><span id="local-6989586621679407858"><span class="annot"><span class="annottext">Ticked (LedgerState (ShelleyBlock era))
</span><a href="#local-6989586621679407858"><span class="hs-identifier hs-var">tls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="annottext">UTxOState era -&gt; UTxO era
forall era. UTxOState era -&gt; UTxO era
</span><span class="hs-identifier hs-var hs-var">SL._utxo</span></span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; UTxO era) -&gt; UTxOState era -&gt; UTxO era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><span class="annottext">LedgerState era -&gt; UTxOState era
forall era. LedgerState era -&gt; UTxOState era
</span><span class="hs-identifier hs-var hs-var">SL._utxoState</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; UTxOState era)
-&gt; LedgerState era -&gt; UTxOState era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="annottext">EpochState era -&gt; LedgerState era
forall era. EpochState era -&gt; LedgerState era
</span><span class="hs-identifier hs-var hs-var">SL.esLState</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; LedgerState era)
-&gt; EpochState era -&gt; LedgerState era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="annottext">NewEpochState era -&gt; EpochState era
forall era. NewEpochState era -&gt; EpochState era
</span><span class="hs-identifier hs-var hs-var">SL.nesEs</span></span><span> </span><span class="annot"><span class="annottext">(NewEpochState era -&gt; EpochState era)
-&gt; NewEpochState era -&gt; EpochState era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><span class="annottext">Ticked (LedgerState (ShelleyBlock era)) -&gt; NewEpochState era
forall era.
Ticked (LedgerState (ShelleyBlock era)) -&gt; NewEpochState era
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier hs-var hs-var">tickedShelleyLedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">Ticked (LedgerState (ShelleyBlock era))
</span><a href="#local-6989586621679407858"><span class="hs-identifier hs-var">tls</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span id="local-6989586621679408080"><span class="annot"><a href="Test.ThreadNet.TxGen.Cardano.html#ejectShelleyTickedLedgerState"><span class="hs-identifier hs-type">ejectShelleyTickedLedgerState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-286"></span><span>     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">Ticked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-cardano-0.1.0.0/noopt/doc/html/ouroboros-consensus-cardano/src"><span class="hs-identifier hs-type">CardanoBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679408080"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">Ticked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-shelley-0.1.0.0/noopt/doc/html/ouroboros-consensus-shelley/src"><span class="hs-identifier hs-type">ShelleyBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679408080"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-288"></span><span id="ejectShelleyTickedLedgerState"><span class="annot"><span class="annottext">ejectShelleyTickedLedgerState :: Ticked (LedgerState (CardanoBlock c))
-&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
</span><a href="Test.ThreadNet.TxGen.Cardano.html#ejectShelleyTickedLedgerState"><span class="hs-identifier hs-var hs-var">ejectShelleyTickedLedgerState</span></a></span></span><span> </span><span id="local-6989586621679407853"><span class="annot"><span class="annottext">Ticked (LedgerState (CardanoBlock c))
</span><a href="#local-6989586621679407853"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-289"></span><span>    </span><span class="annot"><span class="annottext">(Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c))
 -&gt; Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
-&gt; Maybe
     (Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c)))
-&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(:.:) Ticked LedgerState (ShelleyBlock (ShelleyEra c))
-&gt; Ticked (LedgerState (ShelleyBlock (ShelleyEra c)))
forall l k (f :: l -&gt; *) (g :: k -&gt; l) (p :: k).
(:.:) f g p -&gt; f (g p)
</span><span class="hs-identifier hs-var">unComp</span></span><span> </span><span class="annot"><span class="annottext">((:.:) Ticked LedgerState (ShelleyBlock (ShelleyEra c))
 -&gt; Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
-&gt; (Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c))
    -&gt; (:.:) Ticked LedgerState (ShelleyBlock (ShelleyEra c)))
-&gt; Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c))
-&gt; Ticked (LedgerState (ShelleyBlock (ShelleyEra c)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c))
-&gt; (:.:) Ticked LedgerState (ShelleyBlock (ShelleyEra c))
forall (f :: * -&gt; *) blk. Current f blk -&gt; f blk
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var hs-var">currentState</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe
   (Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c)))
 -&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c)))))
-&gt; Maybe
     (Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c)))
-&gt; Maybe (Ticked (LedgerState (ShelleyBlock (ShelleyEra c))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><span class="annottext">NS (Current (Ticked :.: LedgerState)) (CardanoEras c)
-&gt; Maybe
     (Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c)))
forall (f :: * -&gt; *) c.
NS f (CardanoEras c) -&gt; Maybe (f (ShelleyBlock (ShelleyEra c)))
</span><a href="Test.ThreadNet.TxGen.Cardano.html#ejectShelleyNS"><span class="hs-identifier hs-var">ejectShelleyNS</span></a></span><span> </span><span class="annot"><span class="annottext">(NS (Current (Ticked :.: LedgerState)) (CardanoEras c)
 -&gt; Maybe
      (Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c))))
-&gt; NS (Current (Ticked :.: LedgerState)) (CardanoEras c)
-&gt; Maybe
     (Current (Ticked :.: LedgerState) (ShelleyBlock (ShelleyEra c)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="annottext">Telescope
  (K Past) (Current (Ticked :.: LedgerState)) (CardanoEras c)
-&gt; NS (Current (Ticked :.: LedgerState)) (CardanoEras c)
forall k (g :: k -&gt; *) (f :: k -&gt; *) (xs :: [k]).
Telescope g f xs -&gt; NS f xs
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">Tele.tip</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope
   (K Past) (Current (Ticked :.: LedgerState)) (CardanoEras c)
 -&gt; NS (Current (Ticked :.: LedgerState)) (CardanoEras c))
-&gt; Telescope
     (K Past) (Current (Ticked :.: LedgerState)) (CardanoEras c)
-&gt; NS (Current (Ticked :.: LedgerState)) (CardanoEras c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><span class="annottext">HardForkState (Ticked :.: LedgerState) (CardanoEras c)
-&gt; Telescope
     (K Past) (Current (Ticked :.: LedgerState)) (CardanoEras c)
forall (f :: * -&gt; *) (xs :: [*]).
HardForkState f xs -&gt; Telescope (K Past) (Current f) xs
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var hs-var">getHardForkState</span></a></span><span> </span><span class="annot"><span class="annottext">(HardForkState (Ticked :.: LedgerState) (CardanoEras c)
 -&gt; Telescope
      (K Past) (Current (Ticked :.: LedgerState)) (CardanoEras c))
-&gt; HardForkState (Ticked :.: LedgerState) (CardanoEras c)
-&gt; Telescope
     (K Past) (Current (Ticked :.: LedgerState)) (CardanoEras c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><span class="annottext">Ticked (LedgerState (CardanoBlock c))
-&gt; HardForkState (Ticked :.: LedgerState) (CardanoEras c)
forall (xs :: [*]).
Ticked (LedgerState (HardForkBlock xs))
-&gt; HardForkState (Ticked :.: LedgerState) xs
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var hs-var">tickedHardForkLedgerStatePerEra</span></a></span><span> </span><span class="annot"><span class="annottext">(Ticked (LedgerState (CardanoBlock c))
 -&gt; HardForkState (Ticked :.: LedgerState) (CardanoEras c))
-&gt; Ticked (LedgerState (CardanoBlock c))
-&gt; HardForkState (Ticked :.: LedgerState) (CardanoEras c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">Ticked (LedgerState (CardanoBlock c))
</span><a href="#local-6989586621679407853"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-295"></span></pre></body></html>