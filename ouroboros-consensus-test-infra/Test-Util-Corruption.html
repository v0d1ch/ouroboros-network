<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Test.Util.Corruption</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Test.Util.Corruption.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ouroboros-consensus-test-infra-0.1.0.0: Infrastructure for testing ouroboros-consensus</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.Util.Corruption</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Corruption">Corruption</a> = <a href="#v:Corruption">Corruption</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word" title="Data.Word">Word</a></li><li class="src short"><a href="#v:detectCorruption">detectCorruption</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a &#8658; (a &#8594; Encoding) &#8594; (&#8704; s. Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; a)) &#8594; (a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) &#8594; a &#8594; <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a> &#8594; Property</li><li class="src short"><a href="#v:applyCorruption">applyCorruption</a> &#8759; <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Corruption" class="def">Corruption</a> <a href="src/Test.Util.Corruption.html#Corruption" class="link">Source</a> <a href="#t:Corruption" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Corruption" class="def">Corruption</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Word.html#t:Word" title="Data.Word">Word</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:Corruption" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Corruption:Show:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a></span> <a href="src/Test.Util.Corruption.html#line-21" class="link">Source</a> <a href="#t:Corruption" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Corruption:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-Util-Corruption.html">Test.Util.Corruption</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a>] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Corruption:Arbitrary:2"></span> Arbitrary <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a></span> <a href="src/Test.Util.Corruption.html#line-22" class="link">Source</a> <a href="#t:Corruption" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Corruption:Arbitrary:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-Util-Corruption.html">Test.Util.Corruption</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> &#8759; Gen <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a></p><p class="src"><a href="#v:shrink">shrink</a> &#8759; <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a> &#8594; [<a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a>]</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:detectCorruption" class="def">detectCorruption</a> <a href="src/Test.Util.Corruption.html#detectCorruption" class="link">Source</a> <a href="#v:detectCorruption" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; (a &#8594; Encoding)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; (&#8704; s. Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; a))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; (a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</td><td class="doc"><p>Integrity check that should detect the corruption. Return <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code>
 when corrupt.</p></td></tr><tr><td class="src">&#8594; a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; Property</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Serialise <code>a</code>, apply the given corruption, deserialise it, when that
 fails, the corruption was detected. When deserialising the corrupted
 bytestring succeeds, pass the deserialised value to the integrity checking
 function. If that function returns <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code>, the corruption was detected, if
 it returns <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, the corruption was not detected and the test fails.</p></div></div><div class="top"><p class="src"><a id="v:applyCorruption" class="def">applyCorruption</a> &#8759; <a href="Test-Util-Corruption.html#t:Corruption" title="Test.Util.Corruption">Corruption</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="src/Test.Util.Corruption.html#applyCorruption" class="link">Source</a> <a href="#v:applyCorruption" class="selflink">#</a></p><div class="doc"><p>Increment (overflow if necessary) the byte at position <code>i</code> in the
 bytestring, where <code>i = n <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Prelude.html#v:mod" title="Prelude">mod</a></code> length bs</code>.</p><p>If the bytestring is empty, return it unmodified.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>