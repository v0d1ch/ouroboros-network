<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Test.ThreadNet.Ref.PBFT</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Test.ThreadNet.Ref.PBFT.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ouroboros-consensus-test-infra-0.1.0.0: Infrastructure for testing ouroboros-consensus</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.ThreadNet.Ref.PBFT</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A reference simulator of the PBFT protocol under &quot;ideal circumstances&quot;</p><p>See <code><a href="Test-ThreadNet-Ref-PBFT.html#v:step" title="Test.ThreadNet.Ref.PBFT">step</a></code>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Outcome">Outcome</a><ul class="subs"><li>= <a href="#v:Absent">Absent</a></li><li>| <a href="#v:Nominal">Nominal</a></li><li>| <a href="#v:Unable">Unable</a></li><li>| <a href="#v:Wasted">Wasted</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Result">Result</a><ul class="subs"><li>= <a href="#v:Forked">Forked</a> !<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-BlockchainTime-Mock.html#t:NumSlots" title="Ouroboros.Consensus.BlockchainTime.Mock">NumSlots</a> !(<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Map" title="Cardano.Prelude.Base">Map</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-NodeId.html#t:CoreNodeId" title="Ouroboros.Consensus.NodeId">CoreNodeId</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Set" title="Cardano.Prelude.Base">Set</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a>))</li><li>| <a href="#v:Nondeterministic">Nondeterministic</a></li><li>| <a href="#v:Outcomes">Outcomes</a> ![<a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:State">State</a> = <a href="#v:State">State</a> {<ul class="subs"><li><a href="#v:forgers">forgers</a> &#8759; !(<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Seq" title="Cardano.Prelude.Base">Seq</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-NodeId.html#t:CoreNodeId" title="Ouroboros.Consensus.NodeId">CoreNodeId</a>)</li><li><a href="#v:nomCount">nomCount</a> &#8759; !NumNominals</li><li><a href="#v:nextSlot">nextSlot</a> &#8759; !<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a></li><li><a href="#v:outs">outs</a> &#8759; !(<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Seq" title="Cardano.Prelude.Base">Seq</a> <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a>)</li></ul>}</li><li class="src short"><a href="#v:advanceUpTo">advanceUpTo</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a></li><li class="src short"><a href="#v:definitelyEnoughBlocks">definitelyEnoughBlocks</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:emptyState">emptyState</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a></li><li class="src short"><a href="#v:mkLeaderOf">mkLeaderOf</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-NodeId.html#t:CoreNodeId" title="Ouroboros.Consensus.NodeId">CoreNodeId</a></li><li class="src short"><a href="#v:nullState">nullState</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:pbftLimit">pbftLimit</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Prelude.html#t:Integral" title="Prelude">Integral</a> a &#8658; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; a</li><li class="src short"><a href="#v:resultConstrName">resultConstrName</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:simulate">simulate</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-BlockchainTime-Mock.html#t:NumSlots" title="Ouroboros.Consensus.BlockchainTime.Mock">NumSlots</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a></li><li class="src short"><a href="#v:simulateShort">simulateShort</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-BlockchainTime-Mock.html#t:NumSlots" title="Ouroboros.Consensus.BlockchainTime.Mock">NumSlots</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> DetOrNondet ShortState</li><li class="src short"><a href="#v:step">step</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; (<a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a>, <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a>)</li><li class="src short"><a href="#v:viable">viable</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Outcome" class="def">Outcome</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#Outcome" class="link">Source</a> <a href="#t:Outcome" class="selflink">#</a></p><div class="doc"><p>Outcome of a node leading a slot</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Absent" class="def">Absent</a></td><td class="doc"><p>the leader hadn't yet joined</p></td></tr><tr><td class="src"><a id="v:Nominal" class="def">Nominal</a></td><td class="doc"><p>the leader extended the networks' common chain with a valid block</p><p>(We're using <em>nominal</em> in the engineer's sense of &quot;according to
 plan&quot;.)</p></td></tr><tr><td class="src"><a id="v:Unable" class="def">Unable</a></td><td class="doc"><p>the leader could not forge a valid block</p></td></tr><tr><td class="src"><a id="v:Wasted" class="def">Wasted</a></td><td class="doc"><p>the leader forged a valid-but-irrelevant block, because it forged
 before sufficiently synchronizing</p><p>As of commit 4eb23cfe &quot;Merge #1260&quot;, this only happens if a node leads
 in the slot it joins. In that slot, it forges before the mini protocols
 are able to pull in any of the existing nodes' chain, and so it
 re-forges the epoch 0 boundary block (EBB).</p></td></tr></table></div><div class="subs instances"><details id="i:Outcome" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Outcome:Eq:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a></span> <a href="src/Test.ThreadNet.Ref.PBFT.html#line-94" class="link">Source</a> <a href="#t:Outcome" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Outcome:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-ThreadNet-Ref-PBFT.html">Test.ThreadNet.Ref.PBFT</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Outcome:Show:2"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a></span> <a href="src/Test.ThreadNet.Ref.PBFT.html#line-94" class="link">Source</a> <a href="#t:Outcome" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Outcome:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-ThreadNet-Ref-PBFT.html">Test.ThreadNet.Ref.PBFT</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a>] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Outcome:Condense:3"></span> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Util-Condense.html#t:Condense" title="Ouroboros.Consensus.Util.Condense">Condense</a> <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a></span> <a href="src/Test.ThreadNet.Ref.PBFT.html#line-96" class="link">Source</a> <a href="#t:Outcome" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Outcome:Condense:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-ThreadNet-Ref-PBFT.html">Test.ThreadNet.Ref.PBFT</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:condense">condense</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src" class="link">Source</a> <a href="#v:condense" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Result" class="def">Result</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#Result" class="link">Source</a> <a href="#t:Result" class="selflink">#</a></p><div class="doc"><p>The result of a reference simulation</p><p>There is only one way that multiple competing chains arise given the PBFT
 protocol under &quot;ideal circumstances&quot;. When a node leads the slot in which
 it joins, it will forge before syncing. The fresh one-block chain it creates
 this way will be competitive if the other chains in the net are also only
 one block long. Once there is a two-block chain in the net, it will be the
 prefix of the net's one common chain going forward.</p><p>It is possible that the simulator is unable to statically determine which
 one-block chain will be the prefix of the common prefix going forward. In
 such a <code><a href="Test-ThreadNet-Ref-PBFT.html#v:Nondeterministic" title="Test.ThreadNet.Ref.PBFT">Nondeterministic</a></code> scenario, the simulator inherently can not predict
 up to that slot. Moreover, it cannot predict past that slot, since the
 choice of chain affects who may be able to lead next. Therefore, the
 simulator offers no information beyond identifying this case.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Forked" class="def">Forked</a> !<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-BlockchainTime-Mock.html#t:NumSlots" title="Ouroboros.Consensus.BlockchainTime.Mock">NumSlots</a> !(<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Map" title="Cardano.Prelude.Base">Map</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-NodeId.html#t:CoreNodeId" title="Ouroboros.Consensus.NodeId">CoreNodeId</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Set" title="Cardano.Prelude.Base">Set</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a>))</td><td class="doc"><p>All the chains in the net consist of 1 block. The map contains the
 deterministic block selections made by nodes, identifying each one-block
 chain by the slot in which its block was forged.</p></td></tr><tr><td class="src"><a id="v:Nondeterministic" class="def">Nondeterministic</a></td><td class="doc"><p>The outcomes cannot be determined statically.</p></td></tr><tr><td class="src"><a id="v:Outcomes" class="def">Outcomes</a> ![<a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a>]</td><td class="doc"><p>The expected outcomes of each slot.</p></td></tr></table></div><div class="subs instances"><details id="i:Result" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Result:Show:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a></span> <a href="src/Test.ThreadNet.Ref.PBFT.html#line-273" class="link">Source</a> <a href="#t:Result" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Result:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-ThreadNet-Ref-PBFT.html">Test.ThreadNet.Ref.PBFT</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a>] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:State" class="def">State</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#State" class="link">Source</a> <a href="#t:State" class="selflink">#</a></p><div class="doc"><p>The state of a PBFT net with only one longest chain</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:State" class="def">State</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:forgers" class="def">forgers</a> &#8759; !(<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Seq" title="Cardano.Prelude.Base">Seq</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-NodeId.html#t:CoreNodeId" title="Ouroboros.Consensus.NodeId">CoreNodeId</a>)</dfn><div class="doc"><p>who forged each of the last <code>k</code> blocks</p></div></li><li><dfn class="src"><a id="v:nomCount" class="def">nomCount</a> &#8759; !NumNominals</dfn><div class="doc"><p>cache for optimization: number of <code><a href="Test-ThreadNet-Ref-PBFT.html#v:Nominal" title="Test.ThreadNet.Ref.PBFT">Nominal</a></code>s in <code><a href="Test-ThreadNet-Ref-PBFT.html#v:outs" title="Test.ThreadNet.Ref.PBFT">outs</a></code></p></div></li><li><dfn class="src"><a id="v:nextSlot" class="def">nextSlot</a> &#8759; !<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:outs" class="def">outs</a> &#8759; !(<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Seq" title="Cardano.Prelude.Base">Seq</a> <a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a>)</dfn><div class="doc"><p>the outcome of each the last <code>2k</code> slots</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:State" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:State:Eq:1"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a></span> <a href="src/Test.ThreadNet.Ref.PBFT.html#line-113" class="link">Source</a> <a href="#t:State" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:State:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-ThreadNet-Ref-PBFT.html">Test.ThreadNet.Ref.PBFT</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:State:Show:2"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a></span> <a href="src/Test.ThreadNet.Ref.PBFT.html#line-113" class="link">Source</a> <a href="#t:State" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:State:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Test-ThreadNet-Ref-PBFT.html">Test.ThreadNet.Ref.PBFT</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a>] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:advanceUpTo" class="def">advanceUpTo</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#advanceUpTo" class="link">Source</a> <a href="#v:advanceUpTo" class="selflink">#</a></p><div class="doc"><p>Iterate <code><a href="Test-ThreadNet-Ref-PBFT.html#v:step" title="Test.ThreadNet.Ref.PBFT">step</a></code></p><p>POST <code><a href="Test-ThreadNet-Ref-PBFT.html#v:nextSlot" title="Test.ThreadNet.Ref.PBFT">nextSlot</a></code> is <code>&gt;=</code> the given slot</p></div></div><div class="top"><p class="src"><a id="v:definitelyEnoughBlocks" class="def">definitelyEnoughBlocks</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#definitelyEnoughBlocks" class="link">Source</a> <a href="#v:definitelyEnoughBlocks" class="selflink">#</a></p><div class="doc"><p>Confirm that the simulated chain includes at least <code>k</code> blocks within every
 <code>2k</code>-slot window</p></div></div><div class="top"><p class="src"><a id="v:emptyState" class="def">emptyState</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#emptyState" class="link">Source</a> <a href="#v:emptyState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkLeaderOf" class="def">mkLeaderOf</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-NodeId.html#t:CoreNodeId" title="Ouroboros.Consensus.NodeId">CoreNodeId</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#mkLeaderOf" class="link">Source</a> <a href="#v:mkLeaderOf" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:nullState" class="def">nullState</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#nullState" class="link">Source</a> <a href="#v:nullState" class="selflink">#</a></p><div class="doc"><p>There are no recorded forgings</p></div></div><div class="top"><p class="src"><a id="v:pbftLimit" class="def">pbftLimit</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Prelude.html#t:Integral" title="Prelude">Integral</a> a &#8658; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; a <a href="src/Test.ThreadNet.Ref.PBFT.html#pbftLimit" class="link">Source</a> <a href="#v:pbftLimit" class="selflink">#</a></p><div class="doc"><p>How many blocks in the latest <code>k</code>-blocks that a single core node is
 allowed to have signed</p></div></div><div class="top"><p class="src"><a id="v:resultConstrName" class="def">resultConstrName</a> &#8759; <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#resultConstrName" class="link">Source</a> <a href="#v:resultConstrName" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:simulate" class="def">simulate</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-BlockchainTime-Mock.html#t:NumSlots" title="Ouroboros.Consensus.BlockchainTime.Mock">NumSlots</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#simulate" class="link">Source</a> <a href="#v:simulate" class="selflink">#</a></p><div class="doc"><p>Run <code>simulateStep</code>, switching to iterating <code><a href="Test-ThreadNet-Ref-PBFT.html#v:step" title="Test.ThreadNet.Ref.PBFT">step</a></code> once there is a 2-block
 chain</p><p>See <code><a href="Test-ThreadNet-Ref-PBFT.html#t:Result" title="Test.ThreadNet.Ref.PBFT">Result</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:simulateShort" class="def">simulateShort</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-BlockchainTime-Mock.html#t:NumSlots" title="Ouroboros.Consensus.BlockchainTime.Mock">NumSlots</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> DetOrNondet ShortState <a href="src/Test.ThreadNet.Ref.PBFT.html#simulateShort" class="link">Source</a> <a href="#v:simulateShort" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:step" class="def">step</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; (<a href="Test-ThreadNet-Ref-PBFT.html#t:Outcome" title="Test.ThreadNet.Ref.PBFT">Outcome</a>, <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a>) <a href="src/Test.ThreadNet.Ref.PBFT.html#step" class="link">Source</a> <a href="#v:step" class="selflink">#</a></p><div class="doc"><p>Advance the state by one slot</p><p>ASSUMPTION Any new valid block is immediately selected by all nodes.</p><p>This assumption seems mild because of PBFT's fixed round-robin schedule; it
 primarily constrains the network topology, network outages, node restarts,
 clock skew, etc to be trivial. In other words, &quot;ideal circumstances&quot;.</p><p>The assumption is useful in this reference implementation because it lets us
 maintain a single &quot;global&quot; <code><a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a></code> common to all nodes.</p></div></div><div class="top"><p class="src"><a id="v:viable" class="def">viable</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Protocol-PBFT.html#t:PBftParams" title="Ouroboros.Consensus.Protocol.PBFT">PBftParams</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a> &#8594; <a href="Test-ThreadNet-Util-NodeJoinPlan.html#t:NodeJoinPlan" title="Test.ThreadNet.Util.NodeJoinPlan">NodeJoinPlan</a> &#8594; <a href="Test-ThreadNet-Ref-PBFT.html#t:State" title="Test.ThreadNet.Ref.PBFT">State</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Test.ThreadNet.Ref.PBFT.html#viable" class="link">Source</a> <a href="#v:viable" class="selflink">#</a></p><div class="doc"><p><code>True</code> if there will be no necessary violations of &quot;<code>k</code>-blocks in
 <code>2k</code>-slots&quot; before the given slot, assuming all remaining nodes join ASAP</p><p>PRE the given parameters and state are not already <code>tooSparse params st</code></p><p>NOTE this function does not consider the competition between 1-block
 multichains, so <code><a href="Test-ThreadNet-Ref-PBFT.html#v:definitelyEnoughBlocks" title="Test.ThreadNet.Ref.PBFT">definitelyEnoughBlocks</a></code> must still be checked to confirm</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>