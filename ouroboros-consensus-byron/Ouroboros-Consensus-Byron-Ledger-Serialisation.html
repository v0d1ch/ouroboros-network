<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ouroboros.Consensus.Byron.Ledger.Serialisation</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ouroboros-consensus-byron-0.1.0.0: Byron ledger integration in the Ouroboros consensus layer</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Consensus.Byron.Ledger.Serialisation</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Data family instances</a></li><li><a href="#g:2">Serialisation</a></li><li><a href="#g:3">Support for on-disk format</a></li><li><a href="#g:4">Unsized header</a></li><li><a href="#section.orphans">Orphan instances</a></li></ul></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data family</span> <a href="#t:NestedCtxt_">NestedCtxt_</a> blk (a &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) b &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:RawHeader">RawHeader</a> = <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Header.html#t:AHeader" title="Cardano.Chain.Block.Header">AHeader</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:RawBoundaryHeader">RawBoundaryHeader</a> = <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Header.html#t:ABoundaryHeader" title="Cardano.Chain.Block.Header">ABoundaryHeader</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li class="src short"><a href="#v:byronBlockEncodingOverhead">byronBlockEncodingOverhead</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:Word32" title="Distribution.Compat.Prelude.Internal">Word32</a></li><li class="src short"><a href="#v:encodeByronBlock">encodeByronBlock</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> &#8594; Encoding</li><li class="src short"><a href="#v:decodeByronBlock">decodeByronBlock</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>)</li><li class="src short"><a href="#v:decodeByronRegularBlock">decodeByronRegularBlock</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>)</li><li class="src short"><a href="#v:decodeByronBoundaryBlock">decodeByronBoundaryBlock</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>)</li><li class="src short"><a href="#v:encodeByronRegularHeader">encodeByronRegularHeader</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawHeader</a> &#8594; Encoding</li><li class="src short"><a href="#v:decodeByronRegularHeader">decodeByronRegularHeader</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawHeader</a>)</li><li class="src short"><a href="#v:encodeByronBoundaryHeader">encodeByronBoundaryHeader</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawBoundaryHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawBoundaryHeader</a> &#8594; Encoding</li><li class="src short"><a href="#v:decodeByronBoundaryHeader">decodeByronBoundaryHeader</a> &#8759; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawBoundaryHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawBoundaryHeader</a>)</li><li class="src short"><a href="#v:encodeByronHeaderHash">encodeByronHeaderHash</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> &#8594; Encoding</li><li class="src short"><a href="#v:decodeByronHeaderHash">decodeByronHeaderHash</a> &#8759; Decoder s (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>)</li><li class="src short"><a href="#v:byronBinaryBlockInfo">byronBinaryBlockInfo</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Storage-Common.html#t:BinaryBlockInfo" title="Ouroboros.Consensus.Storage.Common">BinaryBlockInfo</a></li><li class="src short"><a href="#v:addV1Envelope">addV1Envelope</a> &#8759; (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-Abstract.html#t:SomeBlock" title="Ouroboros.Consensus.Block.Abstract">SomeBlock</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a>) <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li><li class="src short"><a href="#v:dropV1Envelope">dropV1Envelope</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Except" title="Cardano.Prelude.Base">Except</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-Abstract.html#t:SomeBlock" title="Ouroboros.Consensus.Block.Abstract">SomeBlock</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a>) <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>)</li><li class="src short"><a href="#v:fakeByronBlockSizeHint">fakeByronBlockSizeHint</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Storage-Common.html#t:SizeInBytes" title="Ouroboros.Consensus.Storage.Common">SizeInBytes</a></li><li class="src short"><a href="#v:encodeUnsizedHeader">encodeUnsizedHeader</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:UnsizedHeader" title="Ouroboros.Consensus.Byron.Ledger.Block">UnsizedHeader</a> &#8594; Encoding</li><li class="src short"><a href="#v:decodeUnsizedHeader">decodeUnsizedHeader</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:UnsizedHeader" title="Ouroboros.Consensus.Byron.Ledger.Block">UnsizedHeader</a>)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Data family instances</h1></a><div class="top"><p class="src"><span class="keyword">data family</span> <a id="t:NestedCtxt_" class="def">NestedCtxt_</a> blk (a &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) b &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src" class="link">Source</a> <a href="#t:NestedCtxt_" class="selflink">#</a></p><div class="doc"><p>Context identifying what kind of block we have</p><p>In almost all places we will use <code><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a></code> rather than <code><a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a></code>.</p></div><div class="subs instances"><details id="i:NestedCtxt_" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:NestedCtxt_:SameDepIndex:1"></span> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Util-DepPair.html#t:SameDepIndex" title="Ouroboros.Consensus.Util.DepPair">SameDepIndex</a> (<a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f)</span> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#line-101" class="link">Source</a> <a href="#t:SameDepIndex" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:NestedCtxt_:SameDepIndex:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html">Ouroboros.Consensus.Byron.Ledger.Serialisation</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:sameDepIndex">sameDepIndex</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f b &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> (a <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Type-Equality.html#t::-126-:" title="Data.Type.Equality">:~:</a> b) <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src" class="link">Source</a> <a href="#v:sameDepIndex" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:NestedCtxt_:Show:2"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> (<a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a)</span> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#line-99" class="link">Source</a> <a href="#t:Show" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:NestedCtxt_:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html">Ouroboros.Consensus.Byron.Ledger.Serialisation</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:NestedCtxt_:NestedCtxt_:3"></span> <span class="keyword">data</span> <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a</span> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#line-86" class="link">Source</a> <a href="#t:NestedCtxt_" class="selflink">#</a></td><td class="doc"><p>Since the Byron header does not contain the size, we include it in the
 nested type instead.</p></td></tr><tr><td colspan="2"><details id="i:if:NestedCtxt_:NestedCtxt_:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html">Ouroboros.Consensus.Byron.Ledger.Serialisation</a></p> <div class="src"><span class="keyword">data</span> <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a <span class="keyword">where</span><ul class="inst"><li class="inst"><a id="v:CtxtByronRegular" class="def">CtxtByronRegular</a> &#8759; &#8704; (f &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. !<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Storage-Common.html#t:SizeInBytes" title="Ouroboros.Consensus.Storage.Common">SizeInBytes</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a> <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawHeader</a></li><li class="inst"><a id="v:CtxtByronBoundary" class="def">CtxtByronBoundary</a> &#8759; &#8704; (f &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. !<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Storage-Common.html#t:SizeInBytes" title="Ouroboros.Consensus.Storage.Common">SizeInBytes</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-slotting-0.1.0.0/noopt/doc/html/cardano-slotting/Cardano-Slotting-Slot.html#t:SlotNo" title="Cardano.Slotting.Slot">SlotNo</a>, <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawBoundaryHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawBoundaryHeader</a>)</li></ul></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:RawHeader" class="def">RawHeader</a> = <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Header.html#t:AHeader" title="Cardano.Chain.Block.Header">AHeader</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#RawHeader" class="link">Source</a> <a href="#t:RawHeader" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:RawBoundaryHeader" class="def">RawBoundaryHeader</a> = <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Header.html#t:ABoundaryHeader" title="Cardano.Chain.Block.Header">ABoundaryHeader</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#RawBoundaryHeader" class="link">Source</a> <a href="#t:RawBoundaryHeader" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Serialisation</h1></a><div class="top"><p class="src"><a id="v:byronBlockEncodingOverhead" class="def">byronBlockEncodingOverhead</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:Word32" title="Distribution.Compat.Prelude.Internal">Word32</a> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#byronBlockEncodingOverhead" class="link">Source</a> <a href="#v:byronBlockEncodingOverhead" class="selflink">#</a></p><div class="doc"><p>The Byron block encoding overhead size in bytes.</p><p>This encompasses the overhead in bytes for everything that is encoded
 within a Byron block, excluding the actual generalized transactions
 (transactions, delegation certificates, update votes, and update
 proposals).</p></div></div><div class="top"><p class="src"><a id="v:encodeByronBlock" class="def">encodeByronBlock</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> &#8594; Encoding <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#encodeByronBlock" class="link">Source</a> <a href="#v:encodeByronBlock" class="selflink">#</a></p><div class="doc"><p>Encode a block</p><p>Should be backwards compatible with legacy (cardano-sl) nodes.</p><p>Implementation note: the decoder uses <code><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Block.html#v:fromCBORABlockOrBoundary" title="Cardano.Chain.Block.Block">fromCBORABlockOrBoundary</a></code>, which
 has inverse <code><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Block.html#v:toCBORABlockOrBoundary" title="Cardano.Chain.Block.Block">toCBORABlockOrBoundary</a></code>. This encoder is intended to be
 binary compatible with <code><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Block.html#v:toCBORABlockOrBoundary" title="Cardano.Chain.Block.Block">toCBORABlockOrBoundary</a></code>, but does not use it and
 instead takes advantage of the annotations (using <code>encodePreEncoded</code>).</p></div></div><div class="top"><p class="src"><a id="v:decodeByronBlock" class="def">decodeByronBlock</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>) <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#decodeByronBlock" class="link">Source</a> <a href="#v:decodeByronBlock" class="selflink">#</a></p><div class="doc"><p>Inverse of <code><a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#v:encodeByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">encodeByronBlock</a></code></p></div></div><div class="top"><p class="src"><a id="v:decodeByronRegularBlock" class="def">decodeByronRegularBlock</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>) <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#decodeByronRegularBlock" class="link">Source</a> <a href="#v:decodeByronRegularBlock" class="selflink">#</a></p><div class="doc"><p>Decoder for a regular (non-EBB) Byron block.</p><p>PRECONDITION: the <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></code> given as argument to the decoder is the
 same as the one that is decoded.</p><p>This is a wrapper for <code><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Block.html#v:fromCBORABlock" title="Cardano.Chain.Block.Block">fromCBORABlock</a></code>.</p><p>Use <code><a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#v:decodeByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">decodeByronBlock</a></code> when you can, this function is provided for use by
 the hard-fork combinator.</p></div></div><div class="top"><p class="src"><a id="v:decodeByronBoundaryBlock" class="def">decodeByronBoundaryBlock</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>) <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#decodeByronBoundaryBlock" class="link">Source</a> <a href="#v:decodeByronBoundaryBlock" class="selflink">#</a></p><div class="doc"><p>Decoder for a boundary Byron block.</p><p>PRECONDITION: the <code><a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></code> given as argument to the decoder is the
 same as the one that is decoded.</p><p>This is a wrapper for <code><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Block-Block.html#v:fromCBORABoundaryBlock" title="Cardano.Chain.Block.Block">fromCBORABoundaryBlock</a></code>.</p><p>Use <code><a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#v:decodeByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">decodeByronBlock</a></code> when you can, this function is provided for use by
 the hard-fork combinator.</p></div></div><div class="top"><p class="src"><a id="v:encodeByronRegularHeader" class="def">encodeByronRegularHeader</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawHeader</a> &#8594; Encoding <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#encodeByronRegularHeader" class="link">Source</a> <a href="#v:encodeByronRegularHeader" class="selflink">#</a></p><div class="doc"><p>Encodes a raw Byron header <em>without</em> a tag indicating whether it's a
 regular header or an EBB header.</p><p>Uses the annotation, so cheap.</p></div></div><div class="top"><p class="src"><a id="v:decodeByronRegularHeader" class="def">decodeByronRegularHeader</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawHeader</a>) <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#decodeByronRegularHeader" class="link">Source</a> <a href="#v:decodeByronRegularHeader" class="selflink">#</a></p><div class="doc"><p>Inverse of <code><a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#v:encodeByronRegularHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">encodeByronRegularHeader</a></code></p></div></div><div class="top"><p class="src"><a id="v:encodeByronBoundaryHeader" class="def">encodeByronBoundaryHeader</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawBoundaryHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawBoundaryHeader</a> &#8594; Encoding <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#encodeByronBoundaryHeader" class="link">Source</a> <a href="#v:encodeByronBoundaryHeader" class="selflink">#</a></p><div class="doc"><p>Encodes a raw Byron EBB header <em>without</em> a tag indicating whether it's a
 regular header or an EBB header.</p><p>Uses the annotation, so cheap.</p></div></div><div class="top"><p class="src"><a id="v:decodeByronBoundaryHeader" class="def">decodeByronBoundaryHeader</a> &#8759; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:RawBoundaryHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">RawBoundaryHeader</a>) <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#decodeByronBoundaryHeader" class="link">Source</a> <a href="#v:decodeByronBoundaryHeader" class="selflink">#</a></p><div class="doc"><p>Inverse of <code><a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#v:encodeByronBoundaryHeader" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">encodeByronBoundaryHeader</a></code></p></div></div><div class="top"><p class="src"><a id="v:encodeByronHeaderHash" class="def">encodeByronHeaderHash</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> &#8594; Encoding <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#encodeByronHeaderHash" class="link">Source</a> <a href="#v:encodeByronHeaderHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:decodeByronHeaderHash" class="def">decodeByronHeaderHash</a> &#8759; Decoder s (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-Abstract.html#t:HeaderHash" title="Ouroboros.Consensus.Block.Abstract">HeaderHash</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>) <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#decodeByronHeaderHash" class="link">Source</a> <a href="#v:decodeByronHeaderHash" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Support for on-disk format</h1></a><div class="top"><p class="src"><a id="v:byronBinaryBlockInfo" class="def">byronBinaryBlockInfo</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Storage-Common.html#t:BinaryBlockInfo" title="Ouroboros.Consensus.Storage.Common">BinaryBlockInfo</a> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#byronBinaryBlockInfo" class="link">Source</a> <a href="#v:byronBinaryBlockInfo" class="selflink">#</a></p><div class="doc"><p>The <code><a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Storage-Common.html#t:BinaryBlockInfo" title="Ouroboros.Consensus.Storage.Common">BinaryBlockInfo</a></code> of the given <code><a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a></code>.</p><p>NOTE: the bytestring obtained by slicing the serialised block using the
 header offset and size will correspond to the <em>header annotation</em>, but not
 to the serialised header, as we add an envelope (<code>encodeListLen</code> + tag)
 around a header in <code>encodeByronHeader</code>. This envelope must thus still be
 added to the sliced bytestring before it can be deserialised using
 <code>decodeByronHeader</code>.</p></div></div><a href="#g:4" id="g:4"><h1>Unsized header</h1></a><div class="top"><p class="src"><a id="v:addV1Envelope" class="def">addV1Envelope</a> &#8759; (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-Abstract.html#t:SomeBlock" title="Ouroboros.Consensus.Block.Abstract">SomeBlock</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a>) <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>) &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#addV1Envelope" class="link">Source</a> <a href="#v:addV1Envelope" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dropV1Envelope" class="def">dropV1Envelope</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-prelude-0.1.0.0/noopt/doc/html/cardano-prelude/Cardano-Prelude-Base.html#t:Except" title="Cardano.Prelude.Base">Except</a> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-Abstract.html#t:SomeBlock" title="Ouroboros.Consensus.Block.Abstract">SomeBlock</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a>) <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>, <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>) <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#dropV1Envelope" class="link">Source</a> <a href="#v:dropV1Envelope" class="selflink">#</a></p><div class="doc"><p>Drop the V1 EBB-or-regular-header envelope and reconstruct the context.
 Since we don't know the block size, use <code><a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#v:fakeByronBlockSizeHint" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">fakeByronBlockSizeHint</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:fakeByronBlockSizeHint" class="def">fakeByronBlockSizeHint</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Storage-Common.html#t:SizeInBytes" title="Ouroboros.Consensus.Storage.Common">SizeInBytes</a> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#fakeByronBlockSizeHint" class="link">Source</a> <a href="#v:fakeByronBlockSizeHint" class="selflink">#</a></p><div class="doc"><p>Fake size (used in compatibility mode)</p></div></div><div class="top"><p class="src"><a id="v:encodeUnsizedHeader" class="def">encodeUnsizedHeader</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:UnsizedHeader" title="Ouroboros.Consensus.Byron.Ledger.Block">UnsizedHeader</a> &#8594; Encoding <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#encodeUnsizedHeader" class="link">Source</a> <a href="#v:encodeUnsizedHeader" class="selflink">#</a></p><div class="doc"><p>Encode an unsized header</p><p>Does <em>not</em> have to backwards compatible with legacy (cardano-sl) nodes
 (which never send or store these headers), but should be inverse to
 <code>decodeSizedHeader</code>, and moreover uses <code>fromCBORABlockOrBoundaryHdr</code> from
 cardano-ledger, and so we don't have too much choice in this encoder.</p></div></div><div class="top"><p class="src"><a id="v:decodeUnsizedHeader" class="def">decodeUnsizedHeader</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/cardano-ledger-0.1.0.0/noopt/doc/html/cardano-ledger/Cardano-Chain-Slotting-EpochSlots.html#t:EpochSlots" title="Cardano.Chain.Slotting.EpochSlots">EpochSlots</a> &#8594; Decoder s (<a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:UnsizedHeader" title="Ouroboros.Consensus.Byron.Ledger.Block">UnsizedHeader</a>) <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#decodeUnsizedHeader" class="link">Source</a> <a href="#v:decodeUnsizedHeader" class="selflink">#</a></p><div class="doc"><p>Inverse of <code>encodeSizedHeader</code></p></div></div><h1>Orphan instances</h1><div id="section.orphans"><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:Serialise:Serialise:1"></span> Serialise <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronHash" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronHash</a></span> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#line-69" class="link">Source</a> <a href="#v:-36-fSerialiseByronHash" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:Serialise:Serialise:1"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:encode">encode</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronHash" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronHash</a> &#8594; Encoding</p><p class="src"><a href="#v:decode">decode</a> &#8759; Decoder s <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronHash" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronHash</a></p><p class="src"><a href="#v:encodeList">encodeList</a> &#8759; [<a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronHash" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronHash</a>] &#8594; Encoding</p><p class="src"><a href="#v:decodeList">decodeList</a> &#8759; Decoder s [<a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronHash" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronHash</a>]</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:HasNestedContent:HasNestedContent:2"></span> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-NestedContent.html#t:HasNestedContent" title="Ouroboros.Consensus.Block.NestedContent">HasNestedContent</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a></span> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#line-111" class="link">Source</a> <a href="#v:-36-fHasNestedContentHeaderByronBlock" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:HasNestedContent:HasNestedContent:2"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:unnest">unnest</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> &#8594; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Util-DepPair.html#t:DepPair" title="Ouroboros.Consensus.Util.DepPair">DepPair</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>) <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src" class="link">Source</a> <a href="#v:unnest" class="selflink">#</a></p><p class="src"><a href="#v:nest">nest</a> &#8759; <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Util-DepPair.html#t:DepPair" title="Ouroboros.Consensus.Util.DepPair">DepPair</a> (<a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Block-NestedContent.html#t:NestedCtxt" title="Ouroboros.Consensus.Block.NestedContent">NestedCtxt</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a>) &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:Header" title="Ouroboros.Consensus.Byron.Ledger.Block">Header</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src" class="link">Source</a> <a href="#v:nest" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:SameDepIndex:SameDepIndex:3"></span> <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/Ouroboros-Consensus-Util-DepPair.html#t:SameDepIndex" title="Ouroboros.Consensus.Util.DepPair">SameDepIndex</a> (<a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f)</span> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#line-101" class="link">Source</a> <a href="#v:-36-fSameDepIndexNestedCtxt_" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:SameDepIndex:SameDepIndex:3"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:sameDepIndex">sameDepIndex</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f b &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> (a <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-Type-Equality.html#t::-126-:" title="Data.Type.Equality">:~:</a> b) <a href="file:///__w/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.6.5/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src" class="link">Source</a> <a href="#v:sameDepIndex" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:Show:Show:4"></span> <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> (<a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a)</span> <a href="src/Ouroboros.Consensus.Byron.Ledger.Serialisation.html#line-99" class="link">Source</a> <a href="#v:-36-fShowNestedCtxt_" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:Show:Show:4"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> &#8594; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Consensus-Byron-Ledger-Serialisation.html#t:NestedCtxt_" title="Ouroboros.Consensus.Byron.Ledger.Serialisation">NestedCtxt_</a> <a href="Ouroboros-Consensus-Byron-Ledger-Block.html#t:ByronBlock" title="Ouroboros.Consensus.Byron.Ledger.Block">ByronBlock</a> f a] &#8594; <a href="file:///opt/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/Cabal-2.4.0.1/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>