<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.Byron.Protocol</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#PBftByronCrypto"><span class="hs-identifier">PBftByronCrypto</span></a></span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#genesisKeyCoreNodeId"><span class="hs-identifier">genesisKeyCoreNodeId</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#nodeIdToGenesisKey"><span class="hs-identifier">nodeIdToGenesisKey</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier">guard</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Chain.Common</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC.Common</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Chain.Delegation</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC.Delegation</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Chain.Genesis</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CC.Genesis</span></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.NodeId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">CoreNodeId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Protocol.PBFT</span></a></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Crypto.DSIGN.html"><span class="hs-identifier">Ouroboros.Consensus.Byron.Crypto.DSIGN</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Crypto
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">data</span><span> </span><span id="PBftByronCrypto"><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#PBftByronCrypto"><span class="hs-identifier hs-var">PBftByronCrypto</span></a></span></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">PBftCrypto</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#PBftByronCrypto"><span class="hs-identifier hs-type">PBftByronCrypto</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PBftDSIGN"><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">PBftDSIGN</span></a></span></span><span>          </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#PBftByronCrypto"><span class="hs-identifier hs-type">PBftByronCrypto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Crypto.DSIGN.html#ByronDSIGN"><span class="hs-identifier hs-type">ByronDSIGN</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PBftDelegationCert"><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">PBftDelegationCert</span></a></span></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#PBftByronCrypto"><span class="hs-identifier hs-type">PBftByronCrypto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CC.Delegation.Certificate</span></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PBftVerKeyHash"><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">PBftVerKeyHash</span></a></span></span><span>     </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#PBftByronCrypto"><span class="hs-identifier hs-type">PBftByronCrypto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CC.Common.KeyHash</span></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>  </span><span id="local-6989586621679162792"><span class="annot"><span class="annottext">dlgCertGenVerKey :: PBftDelegationCert PBftByronCrypto
-&gt; VerKeyDSIGN (PBftDSIGN PBftByronCrypto)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">dlgCertGenVerKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VerificationKey -&gt; VerKeyDSIGN ByronDSIGN
</span><a href="Ouroboros.Consensus.Byron.Crypto.DSIGN.html#VerKeyByronDSIGN"><span class="hs-identifier hs-var">VerKeyByronDSIGN</span></a></span><span> </span><span class="annot"><span class="annottext">(VerificationKey -&gt; VerKeyDSIGN ByronDSIGN)
-&gt; (ACertificate () -&gt; VerificationKey)
-&gt; ACertificate ()
-&gt; VerKeyDSIGN ByronDSIGN
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ACertificate () -&gt; VerificationKey
forall a. ACertificate a -&gt; VerificationKey
</span><span class="hs-identifier hs-var hs-var">CC.Delegation.issuerVK</span></span><span>
</span><span id="line-34"></span><span>  </span><span id="local-6989586621679162787"><span class="annot"><span class="annottext">dlgCertDlgVerKey :: PBftDelegationCert PBftByronCrypto
-&gt; VerKeyDSIGN (PBftDSIGN PBftByronCrypto)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">dlgCertDlgVerKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VerificationKey -&gt; VerKeyDSIGN ByronDSIGN
</span><a href="Ouroboros.Consensus.Byron.Crypto.DSIGN.html#VerKeyByronDSIGN"><span class="hs-identifier hs-var">VerKeyByronDSIGN</span></a></span><span> </span><span class="annot"><span class="annottext">(VerificationKey -&gt; VerKeyDSIGN ByronDSIGN)
-&gt; (ACertificate () -&gt; VerificationKey)
-&gt; ACertificate ()
-&gt; VerKeyDSIGN ByronDSIGN
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ACertificate () -&gt; VerificationKey
forall a. ACertificate a -&gt; VerificationKey
</span><span class="hs-identifier hs-var hs-var">CC.Delegation.delegateVK</span></span><span>
</span><span id="line-35"></span><span>  </span><span id="local-6989586621679162784"><span class="annot"><span class="annottext">hashVerKey :: VerKeyDSIGN (PBftDSIGN PBftByronCrypto)
-&gt; PBftVerKeyHash PBftByronCrypto
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">hashVerKey</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Byron.Crypto.DSIGN.html#VerKeyByronDSIGN"><span class="hs-identifier hs-type">VerKeyByronDSIGN</span></a></span><span> </span><span id="local-6989586621679162782"><span class="annot"><a href="#local-6989586621679162782"><span class="hs-identifier hs-var">pk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VerificationKey -&gt; KeyHash
</span><span class="hs-identifier hs-var">CC.Common.hashKey</span></span><span> </span><span class="annot"><span class="annottext">VerificationKey
</span><a href="#local-6989586621679162782"><span class="hs-identifier hs-var">pk</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  PBFT node order
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">-- | Determine the 'CoreNodeId' for a code node, based on the genesis key it</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- will sign blocks on behalf of.</span><span>
</span><span id="line-43"></span><span class="hs-comment">--</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- In PBFT, the 'CoreNodeId' index is determined by the 0-based position in</span><span>
</span><span id="line-45"></span><span class="hs-comment">-- the sort order of the genesis key hashes.</span><span>
</span><span id="line-46"></span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#genesisKeyCoreNodeId"><span class="hs-identifier hs-type">genesisKeyCoreNodeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CC.Genesis.Config</span></span><span>
</span><span id="line-47"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VerKeyDSIGN</span></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Byron.Crypto.DSIGN.html#ByronDSIGN"><span class="hs-identifier hs-type">ByronDSIGN</span></a></span><span>
</span><span id="line-48"></span><span>                        </span><span class="hs-comment">-- ^ The genesis verification key</span><span>
</span><span id="line-49"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CoreNodeId</span></a></span><span>
</span><span id="line-50"></span><span id="genesisKeyCoreNodeId"><span class="annot"><span class="annottext">genesisKeyCoreNodeId :: Config -&gt; VerKeyDSIGN ByronDSIGN -&gt; Maybe CoreNodeId
</span><a href="Ouroboros.Consensus.Byron.Protocol.html#genesisKeyCoreNodeId"><span class="hs-identifier hs-var hs-var">genesisKeyCoreNodeId</span></a></span></span><span> </span><span id="local-6989586621679162780"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679162780"><span class="hs-identifier hs-var">gc</span></a></span></span><span> </span><span id="local-6989586621679162779"><span class="annot"><span class="annottext">VerKeyDSIGN ByronDSIGN
</span><a href="#local-6989586621679162779"><span class="hs-identifier hs-var">vkey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><span class="annottext">Word64 -&gt; CoreNodeId
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">CoreNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; CoreNodeId) -&gt; (Int -&gt; Word64) -&gt; Int -&gt; CoreNodeId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; CoreNodeId) -&gt; Maybe Int -&gt; Maybe CoreNodeId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-52"></span><span>      </span><span class="annot"><span class="annottext">KeyHash -&gt; Set KeyHash -&gt; Maybe Int
forall a. Ord a =&gt; a -&gt; Set a -&gt; Maybe Int
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Set.lookupIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerKeyDSIGN (PBftDSIGN PBftByronCrypto)
-&gt; PBftVerKeyHash PBftByronCrypto
forall c.
PBftCrypto c =&gt;
VerKeyDSIGN (PBftDSIGN c) -&gt; PBftVerKeyHash c
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">hashVerKey</span></a></span><span> </span><span class="annot"><span class="annottext">VerKeyDSIGN (PBftDSIGN PBftByronCrypto)
VerKeyDSIGN ByronDSIGN
</span><a href="#local-6989586621679162779"><span class="hs-identifier hs-var">vkey</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Set KeyHash
</span><a href="Ouroboros.Consensus.Byron.Protocol.html#genesisKeyHashes"><span class="hs-identifier hs-var">genesisKeyHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679162780"><span class="hs-identifier hs-var">gc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | Inverse of 'genesisKeyCoreNodeId'</span><span>
</span><span id="line-55"></span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#nodeIdToGenesisKey"><span class="hs-identifier hs-type">nodeIdToGenesisKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CC.Genesis.Config</span></span><span>
</span><span id="line-56"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CoreNodeId</span></a></span><span>
</span><span id="line-57"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CC.Common.KeyHash</span></span><span>
</span><span id="line-58"></span><span id="nodeIdToGenesisKey"><span class="annot"><span class="annottext">nodeIdToGenesisKey :: Config -&gt; CoreNodeId -&gt; Maybe KeyHash
</span><a href="Ouroboros.Consensus.Byron.Protocol.html#nodeIdToGenesisKey"><span class="hs-identifier hs-var hs-var">nodeIdToGenesisKey</span></a></span></span><span> </span><span id="local-6989586621679162774"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679162774"><span class="hs-identifier hs-var">gc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/ouroboros-consensus-0.1.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CoreNodeId</span></a></span><span> </span><span id="local-6989586621679162773"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679162773"><span class="hs-identifier hs-var">nid</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">guard</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Maybe ()) -&gt; Bool -&gt; Maybe ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679162773"><span class="hs-identifier hs-var">nid</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set KeyHash -&gt; Int
forall a. Set a -&gt; Int
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Set.size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Set KeyHash
</span><a href="Ouroboros.Consensus.Byron.Protocol.html#genesisKeyHashes"><span class="hs-identifier hs-var">genesisKeyHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679162774"><span class="hs-identifier hs-var">gc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><span class="annottext">KeyHash -&gt; Maybe KeyHash
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash -&gt; Maybe KeyHash) -&gt; KeyHash -&gt; Maybe KeyHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Set KeyHash -&gt; KeyHash
forall a. Int -&gt; Set a -&gt; a
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-var">Set.elemAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679162773"><span class="hs-identifier hs-var">nid</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Set KeyHash
</span><a href="Ouroboros.Consensus.Byron.Protocol.html#genesisKeyHashes"><span class="hs-identifier hs-var">genesisKeyHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679162774"><span class="hs-identifier hs-var">gc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="annot"><a href="Ouroboros.Consensus.Byron.Protocol.html#genesisKeyHashes"><span class="hs-identifier hs-type">genesisKeyHashes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CC.Genesis.Config</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/containers-0.6.2.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CC.Common.KeyHash</span></span><span>
</span><span id="line-63"></span><span id="genesisKeyHashes"><span class="annot"><span class="annottext">genesisKeyHashes :: Config -&gt; Set KeyHash
</span><a href="Ouroboros.Consensus.Byron.Protocol.html#genesisKeyHashes"><span class="hs-identifier hs-var hs-var">genesisKeyHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenesisKeyHashes -&gt; Set KeyHash
</span><span class="hs-identifier hs-var hs-var">CC.Genesis.unGenesisKeyHashes</span></span><span>
</span><span id="line-64"></span><span>                 </span><span class="annot"><span class="annottext">(GenesisKeyHashes -&gt; Set KeyHash)
-&gt; (Config -&gt; GenesisKeyHashes) -&gt; Config -&gt; Set KeyHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Config -&gt; GenesisKeyHashes
</span><span class="hs-identifier hs-var">CC.Genesis.configGenesisKeyHashes</span></span><span>
</span><span id="line-65"></span></pre></body></html>