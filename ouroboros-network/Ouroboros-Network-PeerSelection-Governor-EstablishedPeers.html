<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Network.PeerSelection.Governor.EstablishedPeers</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-network-0.1.0.0: A networking layer for the Ouroboros blockchain protocol</span><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Network.PeerSelection.Governor.EstablishedPeers.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Network.PeerSelection.Governor.EstablishedPeers</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:belowTarget">belowTarget</a> &#8759; &#8704; peeraddr peerconn m. (<a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m, <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> peeraddr) &#8658; <a href="Ouroboros-Network-PeerSelection-Governor-Types.html#t:PeerSelectionActions" title="Ouroboros.Network.PeerSelection.Governor.Types">PeerSelectionActions</a> peeraddr peerconn m &#8594; <a href="Ouroboros-Network-PeerSelection-Governor-Types.html#t:MkGuardedDecision" title="Ouroboros.Network.PeerSelection.Governor.Types">MkGuardedDecision</a> peeraddr peerconn m</li><li class="src short"><a href="#v:aboveTarget">aboveTarget</a> &#8759; &#8704; peeraddr peerconn m. (<a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m, <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> peeraddr) &#8658; <a href="Ouroboros-Network-PeerSelection-Governor-Types.html#t:PeerSelectionActions" title="Ouroboros.Network.PeerSelection.Governor.Types">PeerSelectionActions</a> peeraddr peerconn m &#8594; <a href="Ouroboros-Network-PeerSelection-Governor-Types.html#t:MkGuardedDecision" title="Ouroboros.Network.PeerSelection.Governor.Types">MkGuardedDecision</a> peeraddr peerconn m</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:belowTarget" class="def">belowTarget</a> &#8759; &#8704; peeraddr peerconn m. (<a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m, <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> peeraddr) &#8658; <a href="Ouroboros-Network-PeerSelection-Governor-Types.html#t:PeerSelectionActions" title="Ouroboros.Network.PeerSelection.Governor.Types">PeerSelectionActions</a> peeraddr peerconn m &#8594; <a href="Ouroboros-Network-PeerSelection-Governor-Types.html#t:MkGuardedDecision" title="Ouroboros.Network.PeerSelection.Governor.Types">MkGuardedDecision</a> peeraddr peerconn m <a href="src/Ouroboros.Network.PeerSelection.Governor.EstablishedPeers.html#belowTarget" class="link">Source</a> <a href="#v:belowTarget" class="selflink">#</a></p><div class="doc"><p>If we are below the target of <em>warm peers</em> we promote <em>cold peers</em>
 according to <code><a href="Ouroboros-Network-PeerSelection-Governor-Types.html#v:policyPickColdPeersToPromote" title="Ouroboros.Network.PeerSelection.Governor.Types">policyPickColdPeersToPromote</a></code>.</p><p>There are two targets we are trying to hit here:</p><ol><li>a target for the overall number of established peers; and</li><li>the target that all local root peers are established peers.</li></ol><p>These two targets overlap: the conditions and the actions overlap since local
 root peers are also known peers. Since they overlap, the order in which we
 consider these targets is important. We consider the local peers target
 <em>before</em> the target for promoting other peers.</p><p>We will <em>always</em> try to establish connections to the local root peers, even
 if that would put us over target for the number of established peers. If we
 do go over target then the action to demote will be triggered. The demote
 action never picks local root peers.</p></div></div><div class="top"><p class="src"><a id="v:aboveTarget" class="def">aboveTarget</a> &#8759; &#8704; peeraddr peerconn m. (<a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadSTM.html#t:MonadSTM" title="Control.Monad.Class.MonadSTM">MonadSTM</a> m, <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> peeraddr) &#8658; <a href="Ouroboros-Network-PeerSelection-Governor-Types.html#t:PeerSelectionActions" title="Ouroboros.Network.PeerSelection.Governor.Types">PeerSelectionActions</a> peeraddr peerconn m &#8594; <a href="Ouroboros-Network-PeerSelection-Governor-Types.html#t:MkGuardedDecision" title="Ouroboros.Network.PeerSelection.Governor.Types">MkGuardedDecision</a> peeraddr peerconn m <a href="src/Ouroboros.Network.PeerSelection.Governor.EstablishedPeers.html#aboveTarget" class="link">Source</a> <a href="#v:aboveTarget" class="selflink">#</a></p><div class="doc"><p>If we are above the target of <em>established peers</em> we demote some of the
 <em>warm peers</em> to the cold state, according to <code><a href="Ouroboros-Network-PeerSelection-Governor-Types.html#v:policyPickWarmPeersToDemote" title="Ouroboros.Network.PeerSelection.Governor.Types">policyPickWarmPeersToDemote</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>