<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Network.DeltaQ</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-network-0.1.0.0: A networking layer for the Ouroboros blockchain protocol</span><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Network.DeltaQ.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Network.DeltaQ</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">DeltaQ</a></li><li><a href="#g:2">GSV</a></li><li><a href="#g:3">Distribution</a></li><li><a href="#g:4">Bi-directional GSV.</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>&#120491;Q representation and primitives.</p><p>See also <a href="https://www.ofcom.org.uk/__data/assets/pdf_file/0024/71682/traffic-management-detection.pdf">https://www.ofcom.org.uk/__data/assets/pdf_file/0024/71682/traffic-management-detection.pdf</a>
 appendix A.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:DeltaQ">DeltaQ</a> = <a href="#v:DeltaQ">DeltaQ</a> (<a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a>)</li><li class="src short"><a href="#v:deltaqQ99thPercentile">deltaqQ99thPercentile</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a></li><li class="src short"><a href="#v:deltaqQ50thPercentile">deltaqQ50thPercentile</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a></li><li class="src short"><a href="#v:deltaqProbabilityMassBeforeDeadline">deltaqProbabilityMassBeforeDeadline</a> &#8759; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Double" title="Prelude">Double</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:GSV">GSV</a> = <a href="#v:GSV">GSV</a> !<a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> !(<a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a>) !(<a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:SizeInBytes">SizeInBytes</a> = <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a></li><li class="src short"><a href="#v:ballisticGSV">ballisticGSV</a> &#8759; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></li><li class="src short"><a href="#v:gsvLeadingEdgeArrive">gsvLeadingEdgeArrive</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a></li><li class="src short"><a href="#v:gsvTrailingEdgeDepart">gsvTrailingEdgeDepart</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a></li><li class="src short"><a href="#v:gsvTrailingEdgeArrive">gsvTrailingEdgeArrive</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Distribution">Distribution</a> n</li><li class="src short"><a href="#v:degenerateDistribution">degenerateDistribution</a> &#8759; n &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n</li><li class="src short"><span class="keyword">data</span> <a href="#t:PeerGSV">PeerGSV</a> = <a href="#v:PeerGSV">PeerGSV</a> {<ul class="subs"><li><a href="#v:sampleTime">sampleTime</a> &#8759; !<a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:Time" title="Control.Monad.Class.MonadTime">Time</a></li><li><a href="#v:outboundGSV">outboundGSV</a> &#8759; !<a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></li><li><a href="#v:inboundGSV">inboundGSV</a> &#8759; !<a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></li></ul>}</li><li class="src short"><a href="#v:gsvRequestResponseDuration">gsvRequestResponseDuration</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a></li><li class="src short"><a href="#v:defaultGSV">defaultGSV</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a></li><li class="src short"><a href="#v:fromSample">fromSample</a> &#8759; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:Time" title="Control.Monad.Class.MonadTime">Time</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:Time" title="Control.Monad.Class.MonadTime">Time</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>DeltaQ</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:DeltaQ" class="def">DeltaQ</a> <a href="src/Ouroboros.Network.DeltaQ.html#DeltaQ" class="link">Source</a> <a href="#t:DeltaQ" class="selflink">#</a></p><div class="doc"><p>A &quot;&#120491;Q&quot; is a probability distribution on the duration between two events.
 It is an &quot;improper&quot; probability distribution in that it may not integrate
 to 1. The &quot;missing&quot; probability mass represents failure. This allows both
 timing and failure to be represented in one mathematical object.</p><p>In the case of networks a &#120491;Q can be used for example distributions such as
 the time for a leading edge or trailing edge of a packet to traverse a
 network (or failing to do so), and many others besides.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DeltaQ" class="def">DeltaQ</a> (<a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DeltaQ">Instances</h4><details id="i:DeltaQ" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DeltaQ:Semigroup:1"></span> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a></span> <a href="src/Ouroboros.Network.DeltaQ.html#line-58" class="link">Source</a> <a href="#t:DeltaQ" class="selflink">#</a></td><td class="doc"><p>DeltaQ distributions (as independent random variables) are semi-groups
 by convolution.</p></td></tr><tr><td colspan="2"><details id="i:id:DeltaQ:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-DeltaQ.html">Ouroboros.Network.DeltaQ</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b &#8658; b &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:deltaqQ99thPercentile" class="def">deltaqQ99thPercentile</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> <a href="src/Ouroboros.Network.DeltaQ.html#deltaqQ99thPercentile" class="link">Source</a> <a href="#v:deltaqQ99thPercentile" class="selflink">#</a></p><div class="doc"><p>The point in time in the distribution for which 99% of the probability
 mass is before that time.</p><p>This tells us how long we would have to wait to have a 99% chance of the
 end event having happened. Of course 99% is somewhat arbitrary and other
 points in the distribution could be of interest.</p><p>TODO: this needs to be specified better for improper distributions.</p></div></div><div class="top"><p class="src"><a id="v:deltaqQ50thPercentile" class="def">deltaqQ50thPercentile</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> <a href="src/Ouroboros.Network.DeltaQ.html#deltaqQ50thPercentile" class="link">Source</a> <a href="#v:deltaqQ50thPercentile" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:deltaqProbabilityMassBeforeDeadline" class="def">deltaqProbabilityMassBeforeDeadline</a> &#8759; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> &#8594; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Double" title="Prelude">Double</a> <a href="src/Ouroboros.Network.DeltaQ.html#deltaqProbabilityMassBeforeDeadline" class="link">Source</a> <a href="#v:deltaqProbabilityMassBeforeDeadline" class="selflink">#</a></p><div class="doc"><p>This is another way of looking at a &#120491;Q distribution. Instead of giving
 a fraction of the probability mass (like 99%) and asking how long we would
 have to wait, we can say how long we are prepared to wait and ask what
 fraction of the probability mass is before that time.</p><p>So this tells us the chance of the end event happening within the time we
 are prepared to wait. This is useful for evaluating different options for
 which has the greatest probability of success within a deadline.</p></div></div><a href="#g:2" id="g:2"><h1>GSV</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:GSV" class="def">GSV</a> <a href="src/Ouroboros.Network.DeltaQ.html#GSV" class="link">Source</a> <a href="#t:GSV" class="selflink">#</a></p><div class="doc"><p>A &quot;GSV&quot; corresponds to a &#120491;Q that is a function of the size of a data
 unit to be transmitted over a network. That is, it gives the &#120491;Q of the
 transmission time for different sizes of data in <code><a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a></code>.</p><p>The &#120491;Q is broken out into three separate &#120491;Q distributions, &#120491;Q&#8739;G, &#120491;Q&#8739;S and
 &#120491;Q&#8739;V, with the overall &#120491;Q being the convolution of the three components.
 The G and S components captures the <em>structural</em> aspects of networks, while
 the V captures the <em>variable</em> aspects:</p><dl><dt><em>G</em></dt><dd>the <em>geographical</em> component of network delay. This is the minimum
        time to transmit a hypothetical zero-sized data unit. This component
        of the distribution does not depend on the data unit size. It is
        a degenerate distribution, taking only one value.</dd><dt><em>S</em></dt><dd>the <em>serialisation</em> component of network delay. This is time to
        serialise a data unit as it is being transmitted. This is of course
        a function of the data unit size. For each size it is a degenerate
        distribution, taking only one value.</dd><dt><em>V</em></dt><dd>the <em>variable</em> aspect of network delay. This captures the variability
        in network delay due to issues such as congestion. This does not
        depend on the data unit size, and is <em>not</em> a degenerate disruption.</dd></dl><p>For ballistic transmission of packets, <em>S</em> is typically directly proportional
 to the size. Thus the combination of <em>G</em> and <em>S</em> is simply a linear function
 of the size.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:GSV" class="def">GSV</a> !<a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a> !(<a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a>) !(<a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:GSV">Instances</h4><details id="i:GSV" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:GSV:Show:1"></span> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></span> <a href="src/Ouroboros.Network.DeltaQ.html#line-182" class="link">Source</a> <a href="#t:GSV" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:GSV:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-DeltaQ.html">Ouroboros.Network.DeltaQ</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a>] &#8594; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:GSV:Semigroup:2"></span> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></span> <a href="src/Ouroboros.Network.DeltaQ.html#line-178" class="link">Source</a> <a href="#t:GSV" class="selflink">#</a></td><td class="doc"><p>GSVs are semi-groups by convolution on the three individual components.</p></td></tr><tr><td colspan="2"><details id="i:id:GSV:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-DeltaQ.html">Ouroboros.Network.DeltaQ</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b &#8658; b &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SizeInBytes" class="def">SizeInBytes</a> = <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a> <a href="src/Ouroboros.Network.DeltaQ.html#SizeInBytes" class="link">Source</a> <a href="#t:SizeInBytes" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ballisticGSV" class="def">ballisticGSV</a> <a href="src/Ouroboros.Network.DeltaQ.html#ballisticGSV" class="link">Source</a> <a href="#v:ballisticGSV" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a></td><td class="doc"><p><em>G</em></p></td></tr><tr><td class="src">&#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a></td><td class="doc"><p><em>S</em> as time per byte.</p></td></tr><tr><td class="src">&#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a></td><td class="doc"><p><em>V</em> distribution</p></td></tr><tr><td class="src">&#8594; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The case of ballistic packet transmission where the <em>S</em> is directly
 proportional to the packet size.</p></div></div><div class="top"><p class="src"><a id="v:gsvLeadingEdgeArrive" class="def">gsvLeadingEdgeArrive</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> <a href="src/Ouroboros.Network.DeltaQ.html#gsvLeadingEdgeArrive" class="link">Source</a> <a href="#v:gsvLeadingEdgeArrive" class="selflink">#</a></p><div class="doc"><p>The &#120491;Q for when the leading edge of a transmission unit arrives at the
 destination. This is just the convolution of the <em>G</em> and <em>V</em> components.</p></div></div><div class="top"><p class="src"><a id="v:gsvTrailingEdgeDepart" class="def">gsvTrailingEdgeDepart</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> <a href="src/Ouroboros.Network.DeltaQ.html#gsvTrailingEdgeDepart" class="link">Source</a> <a href="#v:gsvTrailingEdgeDepart" class="selflink">#</a></p><div class="doc"><p>The &#120491;Q for when the trailing edge of a transmission unit departs the
 sending end. This is just the convolution of the <em>S</em> and <em>V</em> components.</p><p>Since it involves <em>S</em> then it depends on the <code><a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a></code> of the
 transmission unit.</p></div></div><div class="top"><p class="src"><a id="v:gsvTrailingEdgeArrive" class="def">gsvTrailingEdgeArrive</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a> <a href="src/Ouroboros.Network.DeltaQ.html#gsvTrailingEdgeArrive" class="link">Source</a> <a href="#v:gsvTrailingEdgeArrive" class="selflink">#</a></p><div class="doc"><p>The &#120491;Q for when the trailing edge of a transmission unit arrives at the
 destination. This is the convolution of the <em>G</em>, <em>S</em> and <em>V</em> components.</p><p>Since it involves <em>S</em> then it depends on the <code><a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a></code> of the
 transmission unit.</p></div></div><a href="#g:3" id="g:3"><h1>Distribution</h1></a><div class="doc"><p>Needed to construct a <code><a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a></code> or <code><a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></code></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Distribution" class="def">Distribution</a> n <a href="src/Ouroboros.Network.DeltaQ.html#Distribution" class="link">Source</a> <a href="#t:Distribution" class="selflink">#</a></p><div class="doc"><p>An improper probability distribution over some underlying type (such as
 time durations).</p><p>The current representation only covers the case of degenerate distributions,
 that take a single value with probability 1. This is just a proof of concept
 to illustrate the API.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Distribution">Instances</h4><details id="i:Distribution" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Distribution:Semigroup:1"></span> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Num" title="Prelude">Num</a> n &#8658; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n)</span> <a href="src/Ouroboros.Network.DeltaQ.html#line-107" class="link">Source</a> <a href="#t:Distribution" class="selflink">#</a></td><td class="doc"><p>Distributions are semi-groups by convolution.</p></td></tr><tr><td colspan="2"><details id="i:id:Distribution:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-DeltaQ.html">Ouroboros.Network.DeltaQ</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n) &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b &#8658; b &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:degenerateDistribution" class="def">degenerateDistribution</a> &#8759; n &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:Distribution" title="Ouroboros.Network.DeltaQ">Distribution</a> n <a href="src/Ouroboros.Network.DeltaQ.html#degenerateDistribution" class="link">Source</a> <a href="#v:degenerateDistribution" class="selflink">#</a></p><div class="doc"><p>Make a degenerate distribution.</p><p><a href="https://en.wikipedia.org/wiki/Degenerate_distribution">https://en.wikipedia.org/wiki/Degenerate_distribution</a></p></div></div><a href="#g:4" id="g:4"><h1>Bi-directional GSV.</h1></a><div class="doc"><p><code><a href="Ouroboros-Network-DeltaQ.html#v:gsvRequestResponseDuration" title="Ouroboros.Network.DeltaQ">gsvRequestResponseDuration</a></code> is provided as an example of the <code><a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></code>
 and <code><a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a></code> primitives.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PeerGSV" class="def">PeerGSV</a> <a href="src/Ouroboros.Network.DeltaQ.html#PeerGSV" class="link">Source</a> <a href="#t:PeerGSV" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></code> for both directions with a peer, outbound and inbound.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PeerGSV" class="def">PeerGSV</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:sampleTime" class="def">sampleTime</a> &#8759; !<a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:Time" title="Control.Monad.Class.MonadTime">Time</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:outboundGSV" class="def">outboundGSV</a> &#8759; !<a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:inboundGSV" class="def">inboundGSV</a> &#8759; !<a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PeerGSV">Instances</h4><details id="i:PeerGSV" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerGSV:Show:1"></span> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a></span> <a href="src/Ouroboros.Network.DeltaQ.html#line-244" class="link">Source</a> <a href="#t:PeerGSV" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PeerGSV:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-DeltaQ.html">Ouroboros.Network.DeltaQ</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> &#8594; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> &#8594; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a>] &#8594; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PeerGSV:Semigroup:2"></span> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a></span> <a href="src/Ouroboros.Network.DeltaQ.html#line-273" class="link">Source</a> <a href="#t:PeerGSV" class="selflink">#</a></td><td class="doc"><p>The current tracking model is based on an EWMA
  (https:/<em>en.wikipedia.org</em>wiki/Moving_average#Exponential_moving_average).
  Typically implementations of EWMA assume a regular update, but EWMA is based
  on Exponential Smoothing
  (https:/<em>en.wikipedia.org</em>wiki/Exponential_smoothing). Such smoothing has a
  time constant, which captures the time for a unit impulse to decay to 1 -
  1/e (~ 63.2%), the &amp;#x1D6FC (smoothing factor) is a function of relative
  frequency of the sample interval and this time constant.</p><p>The approach being taken here is one that does not assume a fixed sample
 interval (and hence a fixed &amp;#x1D6FC), instead we calculate, given the
 interval from when the last sample was taken, the &amp;#x1D6FC needed to ensure
 that the old value has sufficiently decayed.</p><p>The exact calcuation involves exponentiation, however where the number of
 samples within the time constant is sufficiently large a simple ratio of the
 sample's interval over the time constant will suffice. The relative error of
 this numerical approximation is, for our use case, small. Eg 1/50 (20s
 between samples with a 1000s time constant) has a relative error of 1%. The
 expected typical range of this relative error is between 5% (ratio of 1/10),
 to 0.5% (1/100).</p><p>Given the inherent measurement noise in this measurement, the use of the
 approximation is well justified. We choose (reaonably aribtarily) 1000s as
 the time constant, it is unclear if this should be a configuration variable
 or not.
 Note that this semigroup is  is non-commutative. The new value must come first.</p></td></tr><tr><td colspan="2"><details id="i:id:PeerGSV:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-DeltaQ.html">Ouroboros.Network.DeltaQ</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> &#8759; <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b &#8658; b &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> <a href="file:///home/runner/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:gsvRequestResponseDuration" class="def">gsvRequestResponseDuration</a> <a href="src/Ouroboros.Network.DeltaQ.html#gsvRequestResponseDuration" class="link">Source</a> <a href="#v:gsvRequestResponseDuration" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a></td><td class="doc"><p>Request size</p></td></tr><tr><td class="src">&#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a></td><td class="doc"><p>Expected response size</p></td></tr><tr><td class="src">&#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:DiffTime" title="Control.Monad.Class.MonadTime">DiffTime</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This is an example derived operation using the other <code><a href="Ouroboros-Network-DeltaQ.html#t:GSV" title="Ouroboros.Network.DeltaQ">GSV</a></code> and <code><a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a></code>
 primitives.</p><p>It calculates the &#120491;Q for the time to send a request of a certain size and
 receive a reply of an expected size. It then takes the 99% percentile as an
 approximation of the maximum time we might be prepared to wait.</p><pre>deltaqQ99thPercentile $
    gsvTrailingEdgeArrive outboundGSV reqSize
 &lt;&gt; gsvTrailingEdgeArrive inboundGSV respSize</pre><p>This is not realistic in that it omits processing time, but that could be
 added as yet another <code><a href="Ouroboros-Network-DeltaQ.html#t:DeltaQ" title="Ouroboros.Network.DeltaQ">DeltaQ</a></code> value, if there's any estimate for it:</p><pre>deltaqQ99thPercentile $
    gsvTrailingEdgeArrive outboundGSV reqSize
 &lt;&gt; gsvTrailingEdgeArrive inboundGSV respSize
 &lt;&gt; processingDeltaQ</pre></div></div><div class="top"><p class="src"><a id="v:defaultGSV" class="def">defaultGSV</a> &#8759; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> <a href="src/Ouroboros.Network.DeltaQ.html#defaultGSV" class="link">Source</a> <a href="#v:defaultGSV" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fromSample" class="def">fromSample</a> &#8759; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:Time" title="Control.Monad.Class.MonadTime">Time</a> &#8594; <a href="file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.4/io-classes-0.2.0.0/noopt/doc/html/io-classes/Control-Monad-Class-MonadTime.html#t:Time" title="Control.Monad.Class.MonadTime">Time</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:SizeInBytes" title="Ouroboros.Network.DeltaQ">SizeInBytes</a> &#8594; <a href="Ouroboros-Network-DeltaQ.html#t:PeerGSV" title="Ouroboros.Network.DeltaQ">PeerGSV</a> <a href="src/Ouroboros.Network.DeltaQ.html#fromSample" class="link">Source</a> <a href="#v:fromSample" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>